!function(ne){var ie="left",re="right",le="up",ae="down",oe="in",ue="out",se="none",ce="auto",he="swipe",pe="pinch",ge="tap",fe="doubletap",de="longtap",we="horizontal",ve="vertical",Te="all",be=10,Se="start",Ee="move",Oe="end",xe="cancel",ye="ontouchstart"in window,me="TouchSwipe";function i(e,v){var t=ye||!v.fallbackToMouseEvents,n=t?"touchstart":"mousedown",i=t?"touchmove":"mousemove",r=t?"touchend":"mouseup",l=t?null:"mouseleave",a="touchcancel",T=0,b=null,S=0,E=0,O=0,x=1,y=0,m=0,L=null,o=ne(e),M="start",D=0,P=null,u=0,R=0,s=0,c=0,h=0,p=null;try{o.bind(n,g),o.bind(a,w)}catch(e){ne.error("events not supported "+n+","+a+" on jQuery.swipe")}function g(e){if(!0!==o.data(me+"_intouch")&&!(0<ne(e.target).closest(v.excludedElements,o).length)){var t,n,i=e.originalEvent?e.originalEvent:e,r=ye?i.touches[0]:i;if(M=Se,ye?D=i.touches.length:e.preventDefault(),m=b=null,x=1,y=O=E=S=T=0,P=function(){for(var e=[],t=0;t<=5;t++)e.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return e}(),(n={})[ie]=K(ie),n[re]=K(re),n[le]=K(le),n[ae]=K(ae),L=n,V(),!ye||D===v.fingers||v.fingers===Te||Q()?(Z(0,r),u=te(),2==D&&(Z(1,i.touches[1]),E=O=ee(P[0].start,P[1].start)),(v.swipeStatus||v.pinchStatus)&&(t=N(i,M))):t=!1,!1===t)return N(i,M=xe),t;G(!0)}}function f(e){var t=e.originalEvent?e.originalEvent:e;if(M!==Oe&&M!==xe&&!z()){var n,i,r,l,a,o,u,s,c,h,p,g,f=B(ye?t.touches[0]:t);if(R=te(),ye&&(D=t.touches.length),M=Ee,2==D&&(0==E?(Z(1,t.touches[1]),E=O=ee(P[0].start,P[1].start)):(B(t.touches[1]),O=ee(P[0].end,P[1].end),P[0].end,P[1].end,m=x<1?ue:oe),x=(O/E*1).toFixed(2),y=Math.abs(E-O)),D===v.fingers||v.fingers===Te||!ye||Q()){if(h=f.start,p=f.end,g=function(e,t){var n=e.x-t.x,i=t.y-e.y,r=Math.atan2(i,n),l=Math.round(180*r/Math.PI);l<0&&(l=360-Math.abs(l));return l}(h,p),function(e,t){if(v.allowPageScroll===se||Q())e.preventDefault();else{var n=v.allowPageScroll===ce;switch(t){case ie:(v.swipeLeft&&n||!n&&v.allowPageScroll!=we)&&e.preventDefault();break;case re:(v.swipeRight&&n||!n&&v.allowPageScroll!=we)&&e.preventDefault();break;case le:(v.swipeUp&&n||!n&&v.allowPageScroll!=ve)&&e.preventDefault();break;case ae:(v.swipeDown&&n||!n&&v.allowPageScroll!=ve)&&e.preventDefault()}}}(e,b=g<=45&&0<=g?ie:g<=360&&315<=g?ie:135<=g&&g<=225?re:45<g&&g<135?ae:le),s=f.start,c=f.end,T=Math.round(Math.sqrt(Math.pow(c.x-s.x,2)+Math.pow(c.y-s.y,2))),S=$(),o=b,u=T,u=Math.max(u,J(o)),L[o].distance=u,(v.swipeStatus||v.pinchStatus)&&(n=N(t,M)),!v.triggerOnTouchEnd||v.triggerOnTouchLeave){var d=!0;if(v.triggerOnTouchLeave){var w={left:(a=(l=ne(l=this)).offset()).left,right:a.left+l.outerWidth(),top:a.top,bottom:a.top+l.outerHeight()};i=f.end,r=w,d=i.x>r.left&&i.x<r.right&&i.y>r.top&&i.y<r.bottom}!v.triggerOnTouchEnd&&d?M=I(Ee):v.triggerOnTouchLeave&&!d&&(M=I(Oe)),M!=xe&&M!=Oe||N(t,M)}}else N(t,M=xe);!1===n&&N(t,M=xe)}}function d(e){var t=e.originalEvent;if(ye&&0<t.touches.length)return s=te(),c=event.touches.length+1,!0;z()&&(D=c),e.preventDefault(),R=te(),S=$(),v.triggerOnTouchEnd||0==v.triggerOnTouchEnd&&M===Ee?N(t,M=Oe):!v.triggerOnTouchEnd&&W()?U(t,M=Oe,ge):M===Ee&&N(t,M=xe),G(!1)}function w(){O=E=u=R=D=0,x=1,V(),G(!1)}function k(e){var t=e.originalEvent;v.triggerOnTouchLeave&&N(t,M=I(Oe))}function A(){o.unbind(n,g),o.unbind(a,w),o.unbind(i,f),o.unbind(r,d),l&&o.unbind(l,k),G(!1)}function I(e){var t=e,n=_(),i=H();return n?!i||e!=Ee||v.triggerOnTouchEnd&&!v.triggerOnTouchLeave?!i&&e==Oe&&v.triggerOnTouchLeave&&(t=xe):t=Oe:t=xe,t}function N(e,t){var n=void 0;return X()&&(v.swipe||v.swipeStatus||v.swipeLeft||v.swipeRight||v.swipeUp||v.swipeDown)?n=U(e,t,he):j()&&Q()&&!1!==n&&(n=U(e,t,pe)),F()&&q()&&!1!==n?n=U(e,t,fe):S>v.longTapThreshold&&T<be&&v.longTap&&!1!==n?n=U(e,t,de):1!==D&&ye||!isNaN(T)&&0!==T||!W()||!1===n||(n=U(e,t,ge)),t===xe&&w(),t===Oe&&(ye?0==e.touches.length&&w():w()),n}function U(e,t,n){var i=void 0;if(n==he){if(o.trigger("swipeStatus",[t,b||null,T||0,S||0,D]),v.swipeStatus&&!1===(i=v.swipeStatus.call(o,e,t,b||null,T||0,S||0,D)))return!1;if(t==Oe&&X()){if(o.trigger("swipe",[b,T,S,D]),v.swipe&&!1===(i=v.swipe.call(o,e,b,T,S,D)))return!1;switch(b){case ie:o.trigger("swipeLeft",[b,T,S,D]),v.swipeLeft&&(i=v.swipeLeft.call(o,e,b,T,S,D));break;case re:o.trigger("swipeRight",[b,T,S,D]),v.swipeRight&&(i=v.swipeRight.call(o,e,b,T,S,D));break;case le:o.trigger("swipeUp",[b,T,S,D]),v.swipeUp&&(i=v.swipeUp.call(o,e,b,T,S,D));break;case ae:o.trigger("swipeDown",[b,T,S,D]),v.swipeDown&&(i=v.swipeDown.call(o,e,b,T,S,D))}}}if(n==pe){if(o.trigger("pinchStatus",[t,m||null,y||0,S||0,D,x]),v.pinchStatus&&!1===(i=v.pinchStatus.call(o,e,t,m||null,y||0,S||0,D,x)))return!1;if(t==Oe&&j())switch(m){case oe:o.trigger("pinchIn",[m||null,y||0,S||0,D,x]),v.pinchIn&&(i=v.pinchIn.call(o,e,m||null,y||0,S||0,D,x));break;case ue:o.trigger("pinchOut",[m||null,y||0,S||0,D,x]),v.pinchOut&&(i=v.pinchOut.call(o,e,m||null,y||0,S||0,D,x))}}return n==ge?t!==xe&&t!==Oe||(clearTimeout(p),q()&&!F()?(h=te(),p=setTimeout(ne.proxy(function(){h=null,o.trigger("tap",[e.target]),v.tap&&(i=v.tap.call(o,e,e.target))},this),v.doubleTapThreshold)):(h=null,o.trigger("tap",[e.target]),v.tap&&(i=v.tap.call(o,e,e.target)))):n==fe?t!==xe&&t!==Oe||(clearTimeout(p),h=null,o.trigger("doubletap",[e.target]),v.doubleTap&&(i=v.doubleTap.call(o,e,e.target))):n==de&&(t!==xe&&t!==Oe||(clearTimeout(p),h=null,o.trigger("longtap",[e.target]),v.longTap&&(i=v.longTap.call(o,e,e.target)))),i}function H(){var e=!0;return null!==v.threshold&&(e=T>=v.threshold),e&&null!==v.cancelThreshold&&(e=J(b)-T<v.cancelThreshold),e}function _(){return!v.maxTimeThreshold||!(S>=v.maxTimeThreshold)}function j(){var e=Y(),t=C(),n=null===v.pinchThreshold||y>=v.pinchThreshold;return e&&t&&n}function Q(){return!!(v.pinchStatus||v.pinchIn||v.pinchOut)}function X(){var e=_(),t=H(),n=Y();return C()&&n&&t&&e}function Y(){return D===v.fingers||v.fingers===Te||!ye}function C(){return 0!==P[0].end.x}function W(){return!!v.tap}function q(){return!!v.doubleTap}function F(){if(null==h)return!1;var e=te();return q()&&e-h<=v.doubleTapThreshold}function V(){c=s=0}function z(){var e=!1;s&&(te()-s<=v.fingerReleaseThreshold&&(e=!0));return e}function G(e){!0===e?(o.bind(i,f),o.bind(r,d),l&&o.bind(l,k)):(o.unbind(i,f,!1),o.unbind(r,d,!1),l&&o.unbind(l,k,!1)),o.data(me+"_intouch",!0===e)}function Z(e,t){var n=void 0!==t.identifier?t.identifier:0;return P[e].identifier=n,P[e].start.x=P[e].end.x=t.pageX||t.clientX,P[e].start.y=P[e].end.y=t.pageY||t.clientY,P[e]}function B(e){var t=function(e){for(var t=0;t<P.length;t++)if(P[t].identifier==e)return P[t]}(void 0!==e.identifier?e.identifier:0);return t.end.x=e.pageX||e.clientX,t.end.y=e.pageY||e.clientY,t}function J(e){return L[e].distance}function K(e){return{direction:e,distance:0}}function $(){return R-u}function ee(e,t){var n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return Math.round(Math.sqrt(n*n+i*i))}function te(){return(new Date).getTime()}this.enable=function(){return o.bind(n,g),o.bind(a,w),o},this.disable=function(){return A(),o},this.destroy=function(){return A(),o.data(me,null),o},this.option=function(e,t){if(void 0!==v[e]){if(void 0===t)return v[e];v[e]=t}else ne.error("Option "+e+" does not exist on jQuery.swipe.options")}}ne.fn.swipe=function(e){var t=ne(this),n=t.data(me);if(n&&"string"==typeof e){if(n[e])return n[e].apply(this,Array.prototype.slice.call(arguments,1));ne.error("Method "+e+" does not exist on jQuery.swipe")}else if(!(n||"object"!=typeof e&&e))return function(n){!n||void 0!==n.allowPageScroll||void 0===n.swipe&&void 0===n.swipeStatus||(n.allowPageScroll=se);void 0!==n.click&&void 0===n.tap&&(n.tap=n.click);n||(n={});return n=ne.extend({},ne.fn.swipe.defaults,n),this.each(function(){var e=ne(this),t=e.data(me);t||(t=new i(this,n),e.data(me,t))})}.apply(this,arguments);return t},ne.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:25,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"button, input, select, textarea, a, .noSwipe"},ne.fn.swipe.phases={PHASE_START:Se,PHASE_MOVE:Ee,PHASE_END:Oe,PHASE_CANCEL:xe},ne.fn.swipe.directions={LEFT:ie,RIGHT:re,UP:le,DOWN:ae,IN:oe,OUT:ue},ne.fn.swipe.pageScroll={NONE:se,HORIZONTAL:we,VERTICAL:ve,AUTO:ce},ne.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:Te}}(jQuery);