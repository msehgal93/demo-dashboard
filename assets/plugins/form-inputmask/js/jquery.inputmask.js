!function(z){null==z.fn.inputmask&&(z.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},escapeChar:"\\",mask:null,oncomplete:z.noop,onincomplete:z.noop,oncleared:z.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:z.noop,onKeyDown:z.noop,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:z.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,isNumeric:!1,radixPoint:"",skipRadixDance:!1,rightAlignNumerics:!0,definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],getMaskLength:function(e,t,i,n,a){var s=e.length;return t||("*"==i?s=n.length+1:1<i&&(s+=e.length*(i-1))),s}},val:z.fn.val,escapeRegex:function(e){return e.replace(new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","gim"),"\\$1")}},z.fn.inputmask=function(e,n){var u,a,W=z.extend(!0,{},z.inputmask.defaults,n),c=null!==navigator.userAgent.match(new RegExp("iphone","i")),l=null!==navigator.userAgent.match(new RegExp("android.*safari.*","i")),k=function(e){var t=document.createElement("input"),i=(e="on"+e)in t;i||(t.setAttribute(e,"return;"),i="function"==typeof t[e]);return t=null,i}("paste")?"paste":"input",s=0;if(l){var t=navigator.userAgent.match(/safari.*/i),r=parseInt(new RegExp(/[0-9]+/).exec(t));u=r<=537}if("string"==typeof e)switch(e){case"mask":return f(W.alias,n),a=v(),this.each(function(){h(z.extend(!0,{},a),0).mask(this)});case"unmaskedvalue":var o=z(this);return o.data("_inputmask")?(a=o.data("_inputmask").masksets,s=o.data("_inputmask").activeMasksetIndex,W=o.data("_inputmask").opts,h(a,s).unmaskedvalue(o)):o.val();case"remove":return this.each(function(){var e=z(this),t=this;if(e.data("_inputmask")){var i;a=e.data("_inputmask").masksets,s=e.data("_inputmask").activeMasksetIndex,W=e.data("_inputmask").opts,t._valueSet(h(a,s).unmaskedvalue(e,!0)),e.removeData("_inputmask"),e.unbind(".inputmask"),e.removeClass("focus.inputmask"),Object.getOwnPropertyDescriptor&&(i=Object.getOwnPropertyDescriptor(t,"value")),i&&i.get?t._valueGet&&Object.defineProperty(t,"value",{get:t._valueGet,set:t._valueSet}):document.__lookupGetter__&&t.__lookupGetter__("value")&&t._valueGet&&(t.__defineGetter__("value",t._valueGet),t.__defineSetter__("value",t._valueSet));try{delete t._valueGet,delete t._valueSet}catch(e){t._valueGet=void 0,t._valueSet=void 0}}});case"getemptymask":return this.data("_inputmask")?(a=this.data("_inputmask").masksets,s=this.data("_inputmask").activeMasksetIndex,a[s]._buffer.join("")):"";case"hasMaskedValue":return!!this.data("_inputmask")&&!this.data("_inputmask").opts.autoUnmask;case"isComplete":return a=this.data("_inputmask").masksets,s=this.data("_inputmask").activeMasksetIndex,W=this.data("_inputmask").opts,h(a,s).isComplete(this[0]._valueGet().split(""));default:return f(e,n)||(W.mask=e),a=v(),this.each(function(){h(z.extend(!0,{},a),s).mask(this)})}else{if("object"==typeof e)return f((W=z.extend(!0,{},z.inputmask.defaults,e)).alias,e),a=v(),this.each(function(){h(z.extend(!0,{},a),s).mask(this)});if(null==e)return this.each(function(){var e=z(this).attr("data-inputmask");if(e&&""!=e)try{e=e.replace(new RegExp("'","g"),'"');var t=z.parseJSON("{"+e+"}");z.extend(!0,t,n),f((W=z.extend(!0,{},z.inputmask.defaults,t)).alias,t),W.alias=void 0,z(this).inputmask(W)}catch(e){}})}function f(e,t){var i=W.aliases[e];return!!i&&(i.alias&&f(i.alias),z.extend(!0,W,i),z.extend(!0,W,t),!0)}function d(e){var s=!1,r=0,t=W.greedy,i=W.repeat;"*"==i&&(t=!1),1==e.length&&0==t&&(W.placeholder="");for(var n=z.map(e.split(""),function(e,t){var i=[];if(e==W.escapeChar)s=!0;else if(e!=W.optionalmarker.start&&e!=W.optionalmarker.end||s){var n=W.definitions[e];if(n&&!s)for(var a=0;a<n.cardinality;a++)i.push(q(r+a));else i.push(e),s=!1;return r+=i.length,i}}),a=n.slice(),o=1;o<i&&t;o++)a=a.concat(n.slice());return{mask:a,repeat:i,greedy:t}}function p(e){var c=!1,f=!1,d=!1;return z.map(e.split(""),function(e,t){var i=[];if(e==W.escapeChar)f=!0;else if(e!=W.optionalmarker.start||f){if(e!=W.optionalmarker.end||f){var n=W.definitions[e];if(n&&!f){for(var a=n.prevalidator,s=a?a.length:0,r=1;r<n.cardinality;r++){var o=r<=s?a[r-1]:[],l=o.validator,u=o.cardinality;i.push({fn:l?"string"==typeof l?new RegExp(l):new function(){this.test=l}:new RegExp("."),cardinality:u||1,optionality:c,newBlockMarker:1==c&&d,offset:0,casing:n.casing,def:n.definitionSymbol|e}),1==c&&(d=!1)}i.push({fn:n.validator?"string"==typeof n.validator?new RegExp(n.validator):new function(){this.test=n.validator}:new RegExp("."),cardinality:n.cardinality,optionality:c,newBlockMarker:d,offset:0,casing:n.casing,def:n.definitionSymbol|e})}else i.push({fn:null,cardinality:0,optionality:c,newBlockMarker:d,offset:0,casing:null,def:e}),f=!1;return d=!1,i}d=!(c=!1)}else d=c=!0})}function v(){var o=[],l=[];function u(e){return W.optionalmarker.start+e+W.optionalmarker.end}function c(e){var t=e.length;for(i=0;i<t&&e.charAt(i)!=W.optionalmarker.start;i++);var n=[e.substring(0,i)];return i<t&&n.push(e.substring(i+1,t)),n}function f(e,t){var n,a,s=function(e){var t=0,n=0,a=e.length;for(i=0;i<a&&(e.charAt(i)==W.optionalmarker.start&&t++,e.charAt(i)==W.optionalmarker.end&&n++,!(0<t&&t==n));i++);var s=[e.substring(0,i)];return i<a&&s.push(e.substring(i+1,a)),s}(t),r=c(s[0]);1<r.length?(n=e+r[0]+u(r[1])+(1<s.length?s[1]:""),-1==z.inArray(n,l)&&(l.push(n),a=d(n),o.push({mask:n,_buffer:a.mask,buffer:a.mask.slice(),tests:p(n),lastValidPosition:void 0,greedy:a.greedy,repeat:a.repeat})),n=e+r[0]+(1<s.length?s[1]:""),-1==z.inArray(n,l)&&(l.push(n),a=d(n),o.push({mask:n,_buffer:a.mask,buffer:a.mask.slice(),tests:p(n),lastValidPosition:void 0,greedy:a.greedy,repeat:a.repeat})),1<c(r[1]).length&&f(e+r[0],r[1]+s[1]),1<s.length&&1<c(s[1]).length&&(f(e+r[0]+u(r[1]),s[1]),f(e+r[0],s[1]))):(n=e+s,-1==z.inArray(n,l)&&(l.push(n),a=d(n),o.push({mask:n,_buffer:a.mask,buffer:a.mask.slice(),tests:p(n),lastValidPosition:void 0,greedy:a.greedy,repeat:a.repeat})))}return z.isArray(W.mask)?z.each(W.mask,function(e,t){f("",t.toString())}):f("",W.mask.toString()),W.greedy?o:o.sort(function(e,t){return e.mask.length-t.mask.length})}function q(e){return W.placeholder.charAt(e%W.placeholder.length)}function h(E,x){var A=!1;function w(){return E[x]}function f(){return w().tests}function d(){return w()._buffer}function G(){return w().buffer}function O(a,o,l){function s(e,t){for(var i=p(e),n=o?1:0,a="",s=t.buffer,r=t.tests[i].cardinality;n<r;r--)a+=N(s,i-(r-1));return o&&(a+=o),null!=t.tests[i].fn&&t.tests[i].fn.test(a,s,e,l,W)}if(l=!0===l)return!0===(u=s(a,w()))&&(u={pos:a}),u;var r=[],u=!1,c=x;return z.each(E,function(e,t){if("object"==typeof t){var i=a;if(c!=(x=e)&&!j(a)){if(o==d()[i]||o==W.skipOptionalPartCharacter)return r.push({activeMasksetIndex:e,result:{refresh:!0,c:d()[i]}}),w().lastValidPosition=i,!1;E[c].lastValidPosition>=i?w().lastValidPosition=-1:i=D(a)}if((null==w().lastValidPosition&&i==D(-1)||w().lastValidPosition>=I(i))&&0<=i&&i<T()){if(!1!==(u=s(i,w()))){!0===u&&(u={pos:i});var n=u.pos||i;(null==w().lastValidPosition||w().lastValidPosition<n)&&(w().lastValidPosition=n)}r.push({activeMasksetIndex:e,result:u})}}}),x=c,r}function S(){var e=x,i={activeMasksetIndex:0,lastValidPosition:-1};z.each(E,function(e,t){if("object"==typeof t){null!=this.lastValidPosition&&this.lastValidPosition>i.lastValidPosition&&(i.activeMasksetIndex=e,i.lastValidPosition=this.lastValidPosition)}}),e!=(x=i.activeMasksetIndex)&&(B(G(),D(i.lastValidPosition),T()),w().writeOutBuffer=!0)}function j(e){var t=p(e),i=f()[t];return null!=i&&i.fn}function p(e){return e%f().length}function T(){return W.getMaskLength(d(),w().greedy,w().repeat,G(),W)}function D(e){var t=T();if(t<=e)return t;for(var i=e;++i<t&&!j(i););return i}function I(e){var t=e;if(t<=0)return 0;for(;0<--t&&!j(t););return t}function R(e,t,i,n){n&&(t=r(e,t));var a=f()[p(t)],s=i;if(null!=s)switch(a.casing){case"upper":s=i.toUpperCase();break;case"lower":s=i.toLowerCase()}e[t]=s}function N(e,t,i){return i&&(t=r(e,t)),e[t]}function r(e,t){for(var i;null==e[t]&&e.length<T();)for(i=0;void 0!==d()[i];)e.push(d()[i++]);return t}function L(e,t,i){e._valueSet(t.join("")),null!=i&&U(e,i)}function B(e,t,i){for(var n=t,a=T();n<i&&n<a;n++)R(e,n,N(d().slice(),n,!0))}function v(e,t){var i=p(t);R(e,t,N(d(),i))}function K(s,r,o,e){var t=null!=e?e.slice():h(s._valueGet()).split("");z.each(E,function(e,t){"object"==typeof t&&(t.buffer=t._buffer.slice(),t.lastValidPosition=void 0,t.p=0)}),!0!==o&&(x=0),r&&s._valueSet("");T();z.each(t,function(e,t){var i=e,n=w().lastValidPosition,a=w().p;a=null==n?i:a,n=null==n?-1:n,(o&&j(i)||(t!=N(d().slice(),i,!0)||j(i))&&-1==z.inArray(t,d().slice(n+1,a)))&&z(s).trigger("keypress",[!0,t.charCodeAt(0),r,o,i])}),!0===o&&(w().lastValidPosition=I(w().p))}function h(e){return e.replace(new RegExp("("+function(e){return z.inputmask.escapeRegex.call(this,e)}(d().join(""))+")*$"),"")}function o(e){for(var t=G(),i=t.slice(),n=i.length-1;0<=n;n--){var a=p(n);if(!f()[a].optionality)break;if(j(n)&&O(n,t[n],!0))break;i.pop()}L(e,i)}function U(e,t,i){function n(e){A&&"number"==typeof e&&(e=G().length-e);return e}var a,s=e.jquery&&0<e.length?e[0]:e;if("number"!=typeof t)return z(e).is(":visible")?(s.setSelectionRange?(t=s.selectionStart,i=s.selectionEnd):document.selection&&document.selection.createRange&&(i=(t=0-(a=document.selection.createRange()).duplicate().moveStart("character",-1e5))+a.text.length),{begin:t=n(t),end:i=n(i)}):{begin:0,end:0};t=n(t),i=n(i),z(e).is(":visible")&&(i="number"==typeof i?i:t,0==W.insertMode&&t==i&&i++,s.setSelectionRange?(s.selectionStart=t,s.selectionEnd=l?t:i):s.createTextRange&&((a=s.createTextRange()).collapse(!0),a.moveEnd("character",i),a.moveStart("character",t),a.select()))}function H(o){var l=!1,u=0,e=x;return z.each(E,function(e,t){if("object"==typeof t){x=e;var i=I(T());if(null!=t.lastValidPosition&&t.lastValidPosition>=u&&t.lastValidPosition==i){for(var n=!0,a=0;a<=i;a++){var s=j(a),r=p(a);if(s&&(null==o[a]||o[a]==q(a))||!s&&o[a]!=d()[r]){n=!1;break}}if(l=l||n)return!1}u=t.lastValidPosition}}),x=e,l}function F(e,t){return A?1<e-t||e-t==1&&W.insertMode:1<t-e||t-e==1&&W.insertMode}return this.unmaskedvalue=function(e,t){return A=e.data("_inputmask").isRTL,i=e,n=t,!f()||!0!==n&&i.hasClass("hasDatepicker")?i[0]._valueGet():z.map(G(),function(e,t){return j(t)&&O(t,e,!0)?e:null}).join("");var i,n},this.isComplete=function(e){return H(e)},this.mask=function(e){var l=z(e);if(l.is(":input")){if(l.data("_inputmask",{masksets:E,activeMasksetIndex:x,opts:W,isRTL:!1}),W.showTooltip&&l.prop("title",w().mask),w().greedy=w().greedy?w().greedy:0==w().repeat,null!=l.attr("maxLength")){var i=l.prop("maxLength");-1<i&&z.each(E,function(e,t){"object"==typeof t&&"*"==t.repeat&&(t.repeat=i)}),T()>i&&-1<i&&(i<d().length&&(d().length=i),0==w().greedy&&(w().repeat=Math.round(i/d().length)),l.prop("maxLength",2*T()))}!function(e){var t;Object.getOwnPropertyDescriptor&&(t=Object.getOwnPropertyDescriptor(e,"value"));if(t&&t.get){if(!e._valueGet){var i=t.get,n=t.set;e._valueGet=function(){return A?i.call(this).split("").reverse().join(""):i.call(this)},e._valueSet=function(e){n.call(this,A?e.split("").reverse().join(""):e)},Object.defineProperty(e,"value",{get:function(){var e=z(this),t=z(this).data("_inputmask"),i=t.masksets,n=t.activeMasksetIndex;return t&&t.opts.autoUnmask?e.inputmask("unmaskedvalue"):this._valueGet()!=i[n]._buffer.join("")?this._valueGet():""},set:function(e){this._valueSet(e),z(this).triggerHandler("setvalue.inputmask")}})}}else if(document.__lookupGetter__&&e.__lookupGetter__("value")){if(!e._valueGet){var i=e.__lookupGetter__("value"),n=e.__lookupSetter__("value");e._valueGet=function(){return A?i.call(this).split("").reverse().join(""):i.call(this)},e._valueSet=function(e){n.call(this,A?e.split("").reverse().join(""):e)},e.__defineGetter__("value",function(){var e=z(this),t=z(this).data("_inputmask"),i=t.masksets,n=t.activeMasksetIndex;return t&&t.opts.autoUnmask?e.inputmask("unmaskedvalue"):this._valueGet()!=i[n]._buffer.join("")?this._valueGet():""}),e.__defineSetter__("value",function(e){this._valueSet(e),z(this).triggerHandler("setvalue.inputmask")})}}else e._valueGet||(e._valueGet=function(){return A?this.value.split("").reverse().join(""):this.value},e._valueSet=function(e){this.value=A?e.split("").reverse().join(""):e}),1!=z.fn.val.inputmaskpatch&&(z.fn.val=function(){if(0==arguments.length){var e=z(this);if(e.data("_inputmask")){if(e.data("_inputmask").opts.autoUnmask)return e.inputmask("unmaskedvalue");var t=z.inputmask.val.apply(e),i=z(this).data("_inputmask"),n=i.masksets,a=i.activeMasksetIndex;return t!=n[a]._buffer.join("")?t:""}return z.inputmask.val.apply(e)}var s=arguments;return this.each(function(){var e=z(this),t=z.inputmask.val.apply(e,s);return e.data("_inputmask")&&e.triggerHandler("setvalue.inputmask"),t})},z.extend(z.fn.val,{inputmaskpatch:!0}))}(e),w().undoBuffer=e._valueGet();var t,n,a,P=!1,C=!1;if(("rtl"==e.dir||W.numericInput&&W.rightAlignNumerics||W.isNumeric&&W.rightAlignNumerics)&&l.css("text-align","right"),"rtl"==e.dir||W.numericInput){e.dir="ltr",l.removeAttr("dir");var s=l.data("_inputmask");s.isRTL=!0,l.data("_inputmask",s),A=!0}l.unbind(".inputmask"),l.removeClass("focus.inputmask"),l.closest("form").bind("submit",function(){l[0]._valueGet&&l[0]._valueGet()!=w().undoBuffer&&l.change()}).bind("reset",function(){z.each(E,function(e,t){"object"==typeof t&&(t.buffer=t._buffer.slice(),t.lastValidPosition=void 0,t.p=-1)})}),l.bind("mouseenter.inputmask",function(){!z(this).hasClass("focus.inputmask")&&W.showMaskOnHover&&this._valueGet()!=G().join("")&&L(this,G())}).bind("blur.inputmask",function(){var e=z(this),t=this,i=t._valueGet(),n=G();e.removeClass("focus.inputmask"),i!=w().undoBuffer&&e.change(),W.clearMaskOnLostFocus&&""!=i&&(i==d().join("")?t._valueSet(""):o(t)),H(n)||(e.trigger("incomplete"),W.clearIncomplete&&(z.each(E,function(e,t){"object"==typeof t&&(t.buffer=t._buffer.slice(),t.lastValidPosition=void 0,t.p=0)}),x=0,W.clearMaskOnLostFocus?t._valueSet(""):L(t,n=d().slice())))}).bind("focus.inputmask",function(){var e=z(this),t=this._valueGet();W.showMaskOnFocus&&!e.hasClass("focus.inputmask")&&(!W.showMaskOnHover||W.showMaskOnHover&&""==t)&&this._valueGet()!=G().join("")&&L(this,G(),w().p),e.addClass("focus.inputmask"),w().undoBuffer=this._valueGet(),e.click()}).bind("mouseleave.inputmask",function(){var e=z(this);W.clearMaskOnLostFocus&&(e.hasClass("focus.inputmask")||(this._valueGet()==d().join("")||""==this._valueGet()?this._valueSet(""):o(this)))}).bind("click.inputmask",function(){var s=this;setTimeout(function(){var e=U(s),t=G();if(e.begin==e.end){var i,n=e.begin,a=w().lastValidPosition;i=W.isNumeric?!1===W.skipRadixDance&&""!=W.radixPoint&&-1!=z.inArray(W.radixPoint,t)?z.inArray(W.radixPoint,t):T():D(null==a?-1:a),U(s,n<i&&(!1!==O(n,t[n],!0)||!j(n))?n:i)}},0)}).bind("dblclick.inputmask",function(){var e=this;null!=w().lastValidPosition&&setTimeout(function(){U(e,0,D(w().lastValidPosition))},0)}).bind("keydown.inputmask",function(t){P=!1;var i=this,r=t.keyCode,o=U(i);if(r==W.keyCode.BACKSPACE||r==W.keyCode.DELETE||c&&127==r||t.ctrlKey&&88==r){if(t.preventDefault(),W.numericInput||A)switch(r){case W.keyCode.BACKSPACE:r=W.keyCode.DELETE;break;case W.keyCode.DELETE:r=W.keyCode.BACKSPACE}if(F(o.begin,o.end)){if(A){var e=o.end;o.end=o.begin,o.begin=e}if(B(G(),o.begin,o.end),0==o.begin&&o.end==T())z.each(E,function(e,t){"object"==typeof t&&(t.buffer=t._buffer.slice(),t.lastValidPosition=void 0,t.p=0)});else{var n=T();if(0==W.greedy)M(o.begin,n);else for(var a=o.begin;a<o.end;a++)j(a)&&M(o.begin,n);K(i,!1,!0,G())}}else z.each(E,function(e,t){if("object"==typeof t){x=e;var i=u?o.end:o.begin,n=G(),a=D(-1),s=T();r==W.keyCode.DELETE?(i<a&&(i=a),i<s&&(i=W.isNumeric&&""!=W.radixPoint&&n[i]==W.radixPoint?M(i=n.length-1==i?i:D(i),s):M(i,s),null!=w().lastValidPosition&&(-1!=w().lastValidPosition&&G()[w().lastValidPosition]==d()[w().lastValidPosition]&&(w().lastValidPosition=0==w().lastValidPosition?-1:I(w().lastValidPosition)),w().lastValidPosition<a?(w().lastValidPosition=void 0,w().p=a):(w().writeOutBuffer=!0,w().p=i)))):r==W.keyCode.BACKSPACE&&(a<i?(i-=1,W.isNumeric&&""!=W.radixPoint&&n[i]==W.radixPoint?(i=V(0,n.length-1==i?i:i-1,q(i),!0),i++):i=M(i,s),null!=w().lastValidPosition&&(-1!=w().lastValidPosition&&G()[w().lastValidPosition]==d()[w().lastValidPosition]&&(w().lastValidPosition=0==w().lastValidPosition?-1:I(w().lastValidPosition)),w().lastValidPosition<a?(w().lastValidPosition=void 0,w().p=a):(w().writeOutBuffer=!0,w().p=i))):0<x&&(w().lastValidPosition=void 0,w().writeOutBuffer=!0,w().p=a,x=0,w().buffer=d().slice(),w().p=D(-1),w().lastValidPosition=void 0))}});S(),L(i,G(),w().p),i._valueGet()==d().join("")&&z(i).trigger("cleared"),W.showTooltip&&l.prop("title",w().mask)}else r==W.keyCode.END||r==W.keyCode.PAGE_DOWN?setTimeout(function(){var e=D(w().lastValidPosition);W.insertMode||e!=T()||t.shiftKey||e--,U(i,t.shiftKey?o.begin:e,e)},0):r==W.keyCode.HOME&&!t.shiftKey||r==W.keyCode.PAGE_UP?U(i,0,t.shiftKey?o.begin:0):r==W.keyCode.ESCAPE?(i._valueSet(w().undoBuffer),K(i,!0,!0)):r!=W.keyCode.INSERT||t.shiftKey||t.ctrlKey?0!=W.insertMode||t.shiftKey||(r==W.keyCode.RIGHT?setTimeout(function(){var e=U(i);U(i,e.begin)},0):r==W.keyCode.LEFT&&setTimeout(function(){var e=U(i);U(i,e.begin-1)},0)):(W.insertMode=!W.insertMode,U(i,W.insertMode||o.begin!=T()?o.begin:o.begin-1));var s=U(i);W.onKeyDown.call(this,t,G(),W),U(i,s.begin,s.end),C=-1!=z.inArray(r,W.ignorables)}).bind("keypress.inputmask",function(e,t,i,n,a,s){if(null==i&&P)return!1;P=!0;var r=this,o=z(r);e=e||window.event;var i=i||e.which||e.charCode||e.keyCode,u=String.fromCharCode(i);{if(!(e.ctrlKey&&e.altKey||!(e.ctrlKey||e.metaKey||C)||!0===t))return!0;if(i){var l,c,f;if(t){var d=a?s:w().p;l={begin:d,end:d}}else l=U(r);var p=F(l.begin,l.end),v=!1;if(p){if(A){var h=l.end;l.end=l.begin,l.begin=h}var k=x;z.each(E,function(e,t){if("object"==typeof t){x=e,w().undoBuffer=G().join("");var i=l.end<T()?l.end:T();w().lastValidPosition>l.begin&&w().lastValidPosition<i?w().lastValidPosition=I(l.begin):v=!0,B(G(),l.begin,i);var n=T();if(0==W.greedy)M(l.begin,n);else for(var a=l.begin;a<i;a++)j(a)&&M(l.begin,n)}}),!0===v&&(x=k,K(r,!1,!0,G()),W.insertMode||z.each(E,function(e,t){"object"==typeof t&&(x=e,V(l.begin,T(),q(l.begin),!0),w().lastValidPosition=D(w().lastValidPosition))})),x=k}if(W.isNumeric&&u==W.radixPoint&&!0!==t){var m=G().join(""),g=m.indexOf(W.radixPoint);-1!=g&&(l.begin=l.begin==g?D(g):g,l.end=l.begin,U(r,l.begin))}var _=W.numericInput&&1!=a&&!p?I(l.begin):D(l.begin-1);if(c=O(_,u,a),!0===a&&(c=[{activeMasksetIndex:x,result:c}]),z.each(c,function(e,t){x=t.activeMasksetIndex,w().writeOutBuffer=!0;var i=t.result;if(!1!==i){var n=!1,a=G();if(!0!==i&&(n=i.refresh,_=null!=i.pos?i.pos:_,u=null!=i.c?i.c:u),!0!==n)if(1==W.insertMode){for(var s=T(),r=a.slice();N(r,s,!0)!=q(s)&&_<=s;)s=0==s?-1:I(s);if(_<=s){V(_,a.length,u);var o=w().lastValidPosition,l=D(o);l!=T()&&_<=o&&N(G(),l)!=q(l)&&(w().lastValidPosition=l)}else w().writeOutBuffer=!1}else R(a,_,u,!0);w().p=D(_)}}),!0!==a&&S(),!1!==n&&(z.each(c,function(e,t){if(t.activeMasksetIndex==x)return f=t,!1}),null!=f)){var b=this;if(setTimeout(function(){W.onKeyValidation.call(b,f.result,W)},0),w().writeOutBuffer&&!1!==f.result){var y=G();L(r,y,t?void 0:W.numericInput?I(w().p):w().p),!0!==t&&setTimeout(function(){H(y)&&o.trigger("complete")},0)}else p&&(w().buffer=w().undoBuffer.split(""))}W.showTooltip&&o.prop("title",w().mask),e.preventDefault()}}}).bind("keyup.inputmask",function(e){var t=z(this),i=this,n=e.keyCode,a=G(),s=U(i);W.onKeyUp.call(this,e,a,W),U(i,s.begin,s.end),n==W.keyCode.TAB&&t.hasClass("focus.inputmask")&&0==i._valueGet().length&&W.showMaskOnFocus&&(a=d().slice(),L(i,a),U(i,0),w().undoBuffer=i._valueGet())}).bind(k+".inputmask dragdrop.inputmask drop.inputmask",function(){var e=this,t=z(e);setTimeout(function(){K(e,!0,!1),H(G())&&t.trigger("complete"),t.click()},0)}).bind("setvalue.inputmask",function(){w().undoBuffer=this._valueGet(),K(this,!0),this._valueGet()==d().join("")&&this._valueSet("")}).bind("complete.inputmask",W.oncomplete).bind("incomplete.inputmask",W.onincomplete).bind("cleared.inputmask",W.oncleared),K(e,!0,!1);try{t=document.activeElement}catch(e){}t===e?(l.addClass("focus.inputmask"),U(e,w().p)):W.clearMaskOnLostFocus?G().join("")==d().join("")?e._valueSet(""):o(e):L(e,G()),n=e,a=z._data(n).events,z.each(a,function(e,t){z.each(t,function(e,t){if("inputmask"==t.namespace){var i=t.handler;t.handler=function(e){if(!this.readOnly&&!this.disabled)return i.apply(this,arguments);e.preventDefault}}})})}function M(e,t,i){for(var n=G();!j(e)&&0<=e-1;)e--;for(var a=e;a<t&&a<T();a++)if(j(a)){v(n,a);var s=D(a),r=N(n,s);if(r!=q(s))if(s<T()&&!1!==O(a,r,!0)&&f()[p(a)].def==f()[p(s)].def)R(n,a,N(n,s),!0),s<t&&v(n,s);else if(j(a))break}else v(n,a);if(null!=i&&R(n,I(t),i),0==w().greedy){var o=h(n.join("")).split("");n.length=o.length;a=0;for(var l=n.length;a<l;a++)n[a]=o[a];0==n.length&&(w().buffer=d().slice())}return e}function V(e,t,i,n){for(var a=G(),s=e;s<=t&&s<T();s++)if(j(s)){var r=N(a,s,!0);if(R(a,s,i,!0),r!=q(s)){var o=D(s);if(!(o<T()))break;if(!1!==O(o,r,!0)&&f()[p(s)].def==f()[p(o)].def)i=r;else{if(j(o))break;i=r}}else if(i=r,!0!==n)break}else v(a,s);var l=a.length;if(0==w().greedy){var u=h(a.join("")).split("");a.length=u.length;s=0;for(var c=a.length;s<c;s++)a[s]=u[s];0==a.length&&(w().buffer=d().slice())}return t-(l-a.length)}},this}return this})}(jQuery);