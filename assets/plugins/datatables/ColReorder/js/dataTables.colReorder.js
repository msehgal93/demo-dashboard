!function(t,n,r){function C(t){for(var e=[],o=0,s=t.length;o<s;o++)e[t[o]]=o;return e}function p(t,e,o){var s=t.splice(e,1)[0];t.splice(o,0,s)}function T(t,e,o){for(var s=[],a=0,n=t.childNodes.length;a<n;a++)1==t.childNodes[a].nodeType&&s.push(t.childNodes[a]);var i=s[e];null!==o?t.insertBefore(i,s[o]):t.appendChild(i)}$.fn.dataTableExt.oApi.fnColReorder=function(o,t,e){var s,a,n,i,r,l,d=!!$.fn.dataTable.Api,h=o.aoColumns.length;if(t!=e)if(t<0||h<=t)this.oApi._fnLog(o,1,"ColReorder 'from' index is out of bounds: "+t);else if(e<0||h<=e)this.oApi._fnLog(o,1,"ColReorder 'to' index is out of bounds: "+e);else{var f=[];for(s=0,a=h;s<a;s++)f[s]=s;p(f,t,e);var u=C(f);for(s=0,a=o.aaSorting.length;s<a;s++)o.aaSorting[s][0]=u[o.aaSorting[s][0]];if(null!==o.aaSortingFixed)for(s=0,a=o.aaSortingFixed.length;s<a;s++)o.aaSortingFixed[s][0]=u[o.aaSortingFixed[s][0]];for(s=0,a=h;s<a;s++){for(n=0,i=(l=o.aoColumns[s]).aDataSort.length;n<i;n++)l.aDataSort[n]=u[l.aDataSort[n]];d&&(l.idx=u[l.idx])}for(d&&$.each(o.aLastSort,function(t,e){o.aLastSort[t].src=u[e.src]}),s=0,a=h;s<a;s++)"number"==typeof(l=o.aoColumns[s]).mData&&(l.mData=u[l.mData],o.oApi._fnColumnOptions(o,s,{}));if(o.aoColumns[t].bVisible){var c=this.oApi._fnColumnIndexToVisible(o,t),g=null;for(s=e<t?e:e+1;null===g&&s<h;)g=this.oApi._fnColumnIndexToVisible(o,s),s++;for(s=0,a=(r=o.nTHead.getElementsByTagName("tr")).length;s<a;s++)T(r[s],c,g);if(null!==o.nTFoot)for(s=0,a=(r=o.nTFoot.getElementsByTagName("tr")).length;s<a;s++)T(r[s],c,g);for(s=0,a=o.aoData.length;s<a;s++)null!==o.aoData[s].nTr&&T(o.aoData[s].nTr,c,g)}for(p(o.aoColumns,t,e),p(o.aoPreSearchCols,t,e),s=0,a=o.aoData.length;s<a;s++){var m=o.aoData[s];d?(m.anCells&&p(m.anCells,t,e),"dom"!==m.src&&$.isArray(m._aData)&&p(m._aData,t,e)):($.isArray(m._aData)&&p(m._aData,t,e),p(m._anHidden,t,e))}for(s=0,a=o.aoHeader.length;s<a;s++)p(o.aoHeader[s],t,e);if(null!==o.aoFooter)for(s=0,a=o.aoFooter.length;s<a;s++)p(o.aoFooter[s],t,e);if(d)new $.fn.dataTable.Api(o).rows().invalidate();for(s=0,a=h;s<a;s++)$(o.aoColumns[s].nTh).off("click.DT"),this.oApi._fnSortAttachListener(o,o.aoColumns[s].nTh,s);$(o.oInstance).trigger("column-reorder",[o,{iFrom:t,iTo:e,aiInvertMapping:u}])}};var e=function(i,t){"use strict";var a=function(t,e){var o;return i.fn.dataTable.Api?o=new i.fn.dataTable.Api(t).settings()[0]:t.fnSettings?o=t.fnSettings():"string"==typeof t?i.fn.dataTable.fnIsDataTable(i(t)[0])&&(o=i(t).eq(0).dataTable().fnSettings()):t.nodeName&&"table"===t.nodeName.toLowerCase()?i.fn.dataTable.fnIsDataTable(t.nodeName)&&(o=i(t.nodeName).dataTable().fnSettings()):t instanceof jQuery?i.fn.dataTable.fnIsDataTable(t[0])&&(o=t.eq(0).dataTable().fnSettings()):o=t,i.fn.dataTable.camelToHungarian&&i.fn.dataTable.camelToHungarian(a.defaults,e||{}),this.s={dt:null,init:i.extend(!0,{},a.defaults,e),fixed:0,fixedRight:0,dropCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.dt=o.oInstance.fnSettings(),(this.s.dt._colReorder=this)._fnConstruct(),o.oApi._fnCallbackReg(o,"aoDestroyCallback",i.proxy(this._fnDestroy,this),"ColReorder"),this};return a.prototype={fnReset:function(){for(var t=[],e=0,o=this.s.dt.aoColumns.length;e<o;e++)t.push(this.s.dt.aoColumns[e]._ColReorder_iOrigCol);return this._fnOrderColumns(t),this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(t){if(t!==r)return this._fnOrderColumns(C(t)),this;for(var e=[],o=0,s=this.s.dt.aoColumns.length;o<s;o++)e.push(this.s.dt.aoColumns[o]._ColReorder_iOrigCol);return e},_fnConstruct:function(){var t,o=this,e=this.s.dt.aoColumns.length;for(this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0,this.s.init.fnReorderCallback&&(this.s.dropCallback=this.s.init.fnReorderCallback),t=0;t<e;t++)t>this.s.fixed-1&&t<e-this.s.fixedRight&&this._fnMouseListener(t,this.s.dt.aoColumns[t].nTh),this.s.dt.aoColumns[t]._ColReorder_iOrigCol=t;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(t,e){o._fnStateSave.call(o,e)},"ColReorder_State");var s=null;if(this.s.init.aiOrder&&(s=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&void 0!==this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(s=this.s.dt.oLoadedState.ColReorder),s)if(o.s.dt._bInitComplete){var a=C(s);o._fnOrderColumns.call(o,a)}else{var n=!1;this.s.dt.aoDrawCallback.push({fn:function(){if(!o.s.dt._bInitComplete&&!n){n=!0;var t=C(s);o._fnOrderColumns.call(o,t)}},sName:"ColReorder_Pre"})}else this._fnSetColumnIndexes()},_fnOrderColumns:function(t){if(t.length==this.s.dt.aoColumns.length){for(var e=0,o=t.length;e<o;e++){var s=i.inArray(e,t);e!=s&&(p(t,s,e),this.s.dt.oInstance.fnColReorder(s,e))}""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),this._fnSetColumnIndexes()}else this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.")},_fnStateSave:function(t){var e,o,s,a=this.s.dt;for(e=0;e<t.aaSorting.length;e++)t.aaSorting[e][0]=a.aoColumns[t.aaSorting[e][0]]._ColReorder_iOrigCol;var n=i.extend(!0,[],t.aoSearchCols);for(t.ColReorder=[],e=0,o=a.aoColumns.length;e<o;e++)s=a.aoColumns[e]._ColReorder_iOrigCol,t.aoSearchCols[s]=n[e],t.abVisCols[s]=a.aoColumns[e].bVisible,t.ColReorder.push(s)},_fnMouseListener:function(t,e){var o=this;i(e).on("mousedown.ColReorder",function(t){t.preventDefault(),o._fnMouseDown.call(o,t,e)})},_fnMouseDown:function(t,e){var o=this,s=i(t.target).closest("th, td").offset(),a=parseInt(i(e).attr("data-column-index"),10);a!==r&&(this.s.mouse.startX=t.pageX,this.s.mouse.startY=t.pageY,this.s.mouse.offsetX=t.pageX-s.left,this.s.mouse.offsetY=t.pageY-s.top,this.s.mouse.target=this.s.dt.aoColumns[a].nTh,this.s.mouse.targetIndex=a,this.s.mouse.fromIndex=a,this._fnRegions(),i(n).on("mousemove.ColReorder",function(t){o._fnMouseMove.call(o,t)}).on("mouseup.ColReorder",function(t){o._fnMouseUp.call(o,t)}))},_fnMouseMove:function(t){if(null===this.dom.drag){if(Math.pow(Math.pow(t.pageX-this.s.mouse.startX,2)+Math.pow(t.pageY-this.s.mouse.startY,2),.5)<5)return;this._fnCreateDragNode()}this.dom.drag.css({left:t.pageX-this.s.mouse.offsetX,top:t.pageY-this.s.mouse.offsetY});for(var e=!1,o=this.s.mouse.toIndex,s=1,a=this.s.aoTargets.length;s<a;s++)if(t.pageX<this.s.aoTargets[s-1].x+(this.s.aoTargets[s].x-this.s.aoTargets[s-1].x)/2){this.dom.pointer.css("left",this.s.aoTargets[s-1].x),this.s.mouse.toIndex=this.s.aoTargets[s-1].to,e=!0;break}e||(this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x),this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to),this.s.init.bRealtime&&o!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),this.s.mouse.fromIndex=this.s.mouse.toIndex,this._fnRegions())},_fnMouseUp:function(t){i(n).off("mousemove.ColReorder mouseup.ColReorder"),null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),this._fnSetColumnIndexes(),""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(),null!==this.s.dropCallback&&this.s.dropCallback.call(this),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt))},_fnRegions:function(){var t=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:i(this.s.dt.nTable).offset().left,to:0});for(var e=0,o=0,s=t.length;o<s;o++)o!=this.s.mouse.fromIndex&&e++,t[o].bVisible&&this.s.aoTargets.push({x:i(t[o].nTh).offset().left+i(t[o].nTh).outerWidth(),to:e});0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight),0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var t=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,e=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,o=e.parentNode,s=o.parentNode,a=s.parentNode,n=i(e).clone();this.dom.drag=i(a.cloneNode(!1)).addClass("DTCR_clonedTable").append(s.cloneNode(!1).appendChild(o.cloneNode(!1).appendChild(n[0]))).css({position:"absolute",top:0,left:0,width:i(e).outerWidth(),height:i(e).outerHeight()}).appendTo("body"),this.dom.pointer=i("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:t?i("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:i(this.s.dt.nTable).offset().top,height:t?i("div.dataTables_scroll",this.s.dt.nTableWrapper).height():i(this.s.dt.nTable).height()}).appendTo("body")},_fnDestroy:function(){var t,e;for(t=0,e=this.s.dt.aoDrawCallback.length;t<e;t++)if("ColReorder_Pre"===this.s.dt.aoDrawCallback[t].sName){this.s.dt.aoDrawCallback.splice(t,1);break}i(this.s.dt.nTHead).find("*").off(".ColReorder"),i.each(this.s.dt.aoColumns,function(t,e){i(e.nTh).removeAttr("data-column-index")}),this.s.dt._colReorder=null,this.s=null},_fnSetColumnIndexes:function(){i.each(this.s.dt.aoColumns,function(t,e){i(e.nTh).attr("data-column-index",t)})}},a.defaults={aiOrder:null,bRealtime:!1,iFixedColumns:0,iFixedColumnsRight:0,fnReorderCallback:null},a.version="1.1.1",i.fn.dataTable.ColReorder=a,i.fn.DataTable.ColReorder=a,"function"==typeof i.fn.dataTable&&"function"==typeof i.fn.dataTableExt.fnVersionCheck&&i.fn.dataTableExt.fnVersionCheck("1.9.3")?i.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var e=t.oInstance;if(t._colReorder)e.oApi._fnLog(t,1,"ColReorder attempted to initialise twice. Ignoring second");else{var o=t.oInit,s=o.colReorder||o.oColReorder||{};new a(t,s)}return null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.9.3 or greater - www.datatables.net/download"),i.fn.dataTable.Api&&(i.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(t){t._colReorder.fnReset()})}),i.fn.dataTable.Api.register("colReorder.order()",function(e){return e?this.iterator("table",function(t){t._colReorder.fnOrder(e)}):this.context.length?this.context[0]._colReorder.fnOrder():null})),a};"function"==typeof define&&define.amd?define("datatables-colreorder",["jquery","datatables"],e):jQuery&&!jQuery.fn.dataTable.ColReorder&&e(jQuery,jQuery.fn.dataTable)}(window,document);