!function(y){"use strict";y.fn.bootstrapDualListbox=function(h){return this.each(function(){var e=y(this);if(!e.is("select"))return e.find("select").each(function(e,t){y(t).bootstrapDualListbox(h)});if(e.data("duallistbox_generated"))return this;var n,a=y.extend({bootstrap2compatible:!1,preserveselectiononmove:!1,moveonselect:!0,initialfilterfrom:"",initialfilterto:"",helperselectnamepostfix:"_helper",infotext:"Showing all {0}",infotextfiltered:'<span class="label label-warning">Filtered</span> {0} from {1}',infotextempty:"Empty list",selectorminimalheight:100,showfilterinputs:!0,filterplaceholder:"Filter",filtertextclear:"show all",nonselectedlistlabel:!1,selectedlistlabel:!1},h);n=a.bootstrap2compatible?y('<div class="row-fluid bootstrap-duallistbox-container bs2compatible"><div class="span6 box1"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-mini clear1 pull-right">'+a.filtertextclear+'</button></span><input placeholder="'+a.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn moveall" title="Move all"><i class="fa fa-arrow-right"></i><i class="fa fa-arrow-right"></i></button><button type="button" class="btn move" title="Move selected"><i class="fa fa-arrow-right"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div><div class="span6 box2"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-mini clear2 pull-right">'+a.filtertextclear+'</button></span><input placeholder="'+a.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn remove" title="Remove selected"><i class="fa fa-arrow-left"></i></button><button type="button" class="btn removeall" title="Remove all"><i class="fa fa-arrow-left"></i><i class="fa fa-arrow-left"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div></div>').insertBefore(e):y('<div class="row bootstrap-duallistbox-container"><div class="col-md-6 box1"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-primary btn-xs clear1 pull-right">'+a.filtertextclear+'</button></span><input placeholder="'+a.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn btn-primary moveall" title="Move all"><i class="fa fa-arrow-right"></i><i class="fa fa-arrow-right"></i></button><button type="button" class="btn btn-primary move" title="Move selected"><i class="fa fa-arrow-right"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div><div class="col-md-6 box2"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-primary btn-xs clear2 pull-right">'+a.filtertextclear+'</button></span><input placeholder="'+a.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn btn-primary remove" title="Remove selected"><i class="fa fa-arrow-left"></i></button><button type="button" class="btn btn-primary  removeall" title="Remove all"><i class="fa fa-arrow-left"></i><i class="fa fa-arrow-left"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div></div>').insertBefore(e);var s={originalselect:e,box1:y(".box1",n),box2:y(".box2",n),filterinput1:y(".box1 .filter",n),filterinput2:y(".box2 .filter",n),filter1clear:y(".box1 .clear1",n),filter2clear:y(".box2 .clear2",n),info1:y(".box1 .info",n),info2:y(".box2 .info",n),select1:y(".box1 select",n),select2:y(".box2 select",n),movebutton:y(".box1 .move",n),removebutton:y(".box2 .remove",n),moveallbutton:y(".box1 .moveall",n),removeallbutton:y(".box2 .removeall",n),form:y(y(".box1 .filter",n)[0].form)},i=0,r=0,c=/android/i.test(navigator.userAgent.toLowerCase());function f(){s.originalselect.find("option").each(function(e,t){var l=y(t);void 0===l.data("original-index")&&l.data("original-index",i++),void 0===l.data("_selected")&&l.data("_selected",!1)})}function p(){r=0,s.select1.empty(),s.select2.empty(),s.originalselect.find("option").each(function(e,t){var l=y(t);l.prop("selected")?(r++,s.select2.append(l.clone(!0).prop("selected",l.data("_selected")))):s.select1.append(l.clone(!0).prop("selected",l.data("_selected")))}),v(),m(),t()}function d(e,l){return e.replace(/\{(\d+)\}/g,function(e,t){return void 0!==l[t]?l[t]:e})}function t(){if(a.infotext){var e=s.select1.find("option").length,t=s.select2.find("option").length,l=s.originalselect.find("option").length-r,i=r,o="";o=0===l?a.infotextempty:d(e===l?a.infotext:a.infotextfiltered,[e,l]),s.info1.html(o),s.box1.toggleClass("filtered",!(e===l||0===l)),o=0===i?a.infotextempty:d(t===i?a.infotext:a.infotextfiltered,[t,i]),s.info2.html(o),s.box2.toggleClass("filtered",!(t===i||0===i))}}function u(){s.select1.find("option").each(function(e,t){var l=y(t);s.originalselect.find("option").eq(l.data("original-index")).data("_selected",l.prop("selected"))})}function b(){s.select2.find("option").each(function(e,t){var l=y(t);s.originalselect.find("option").eq(l.data("original-index")).data("_selected",l.prop("selected"))})}function v(){u(),s.select1.empty().scrollTop(0);var o=new RegExp(y.trim(s.filterinput1.val()),"gi");s.originalselect.find("option").not(":selected").each(function(e,t){var l=y(t),i=!0;t.text.match(o)&&(i=!1,s.select1.append(l.clone(!0).prop("selected",l.data("_selected")))),s.originalselect.find("option").eq(l.data("original-index")).data("filtered1",i)}),t()}function m(){b(),s.select2.empty().scrollTop(0);var o=new RegExp(y.trim(s.filterinput2.val()),"gi");s.originalselect.find("option:selected").each(function(e,t){var l=y(t),i=!0;t.text.match(o)&&(i=!1,s.select2.append(l.clone(!0).prop("selected",l.data("_selected")))),s.originalselect.find("option").eq(l.data("original-index")).data("filtered2",i)}),t()}function l(e){e.find("option").sort(function(e,t){return y(e).data("original-index")>y(t).data("original-index")?1:-1}).appendTo(e)}function o(i,o){s.originalselect.find("option").each(function(e,t){var l=y(t);l.data("original-index")===i&&l.prop("selected",o)})}function g(){"all"===a.preserveselectiononmove?(u(),b()):"moved"===a.preserveselectiononmove&&u(),s.select1.find("option:selected").each(function(e,t){var l=y(t);l.data("filtered1")||o(l.data("original-index"),!0)}),p(),l(s.select2)}function x(){"all"===a.preserveselectiononmove?(u(),b()):"moved"===a.preserveselectiononmove&&b(),s.select2.find("option:selected").each(function(e,t){var l=y(t);l.data("filtered2")||o(l.data("original-index"),!1)}),p(),l(s.select1)}!function(){c&&(a.moveonselect=!0,a.preserveselectiononmove=!1);a.moveonselect&&n.addClass("moveonselect");var e=s.originalselect.attr("name")||"";if(a.nonselectedlistlabel){var t="bootstrap-duallistbox-nonselected-list_"+e;s.box1.prepend('<label for="'+t+'">'+a.nonselectedlistlabel+"</label>"),s.select1.prop("id",t)}if(a.selectedlistlabel){var l="bootstrap-duallistbox-selected-list_"+e;s.box2.prepend('<label for="'+l+'">'+a.selectedlistlabel+"</label>"),s.select2.prop("id",l)}a.helperselectnamepostfix&&(s.select1.attr("name",e+a.helperselectnamepostfix+"1"),s.select2.attr("name",e+a.helperselectnamepostfix+"2"));var i=s.originalselect.attr("class");void 0!==i&&i&&((i=i.match(/\bspan[1-9][0-2]?/))||(i=(i=s.originalselect.attr("class")).match(/\bcol-md-[1-9][0-2]?/)));i&&n.addClass(i.toString());var o=s.originalselect.height()<a.selectorminimalheight?a.selectorminimalheight:s.originalselect.height();s.select1.height(o),s.select2.height(o),s.originalselect.addClass("hide"),f(),a.showfilterinputs?(s.filterinput1.val(a.initialfilterfrom),s.filterinput2.val(a.initialfilterto)):(s.filterinput1.hide(),s.filterinput2.hide());s.form.submit(function(e){s.filterinput1.is(":focus")?(e.preventDefault(),s.filterinput1.focusout()):s.filterinput2.is(":focus")&&(e.preventDefault(),s.filterinput2.focusout())}),s.originalselect.on("bootstrapduallistbox.refresh",function(e,t){f(),t?s.select1.find("option").each(function(){s.originalselect.find("option").data("_selected",!1)}):(u(),b()),p()}),s.filter1clear.on("click",function(){s.filterinput1.val(""),p()}),s.filter2clear.on("click",function(){s.filterinput2.val(""),p()}),s.movebutton.on("click",function(){g()}),s.moveallbutton.on("click",function(){"all"===a.preserveselectiononmove?(u(),b()):"moved"===a.preserveselectiononmove&&u(),s.originalselect.find("option").each(function(e,t){var l=y(t);l.data("filtered1")||l.prop("selected",!0)}),p()}),s.removebutton.on("click",function(){x()}),s.removeallbutton.on("click",function(){"all"===a.preserveselectiononmove?(u(),b()):"moved"===a.preserveselectiononmove&&b(),s.originalselect.find("option").each(function(e,t){var l=y(t);l.data("filtered2")||l.prop("selected",!1)}),p()}),s.filterinput1.on("change keyup",function(){v()}),s.filterinput2.on("change keyup",function(){m()}),a.moveonselect&&(a.preserveselectiononmove=!1,s.select1.on("change",function(){g()}),s.select2.on("change",function(){x()})),p()}()})}}(jQuery);