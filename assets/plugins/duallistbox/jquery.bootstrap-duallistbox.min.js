!function(y){"use strict";y.fn.bootstrapDualListbox=function(h){return this.each(function(){function n(){m.originalselect.find("option").each(function(e,t){var l=y(t);void 0===l.data("original-index")&&l.data("original-index",o++),void 0===l.data("_selected")&&l.data("_selected",!1)})}function a(){g=0,m.select1.empty(),m.select2.empty(),m.originalselect.find("option").each(function(e,t){var l=y(t);l.prop("selected")?(g++,m.select2.append(l.clone(!0).prop("selected",l.data("_selected")))):m.select1.append(l.clone(!0).prop("selected",l.data("_selected")))}),f(),p(),e()}function s(e,l){return e.replace(/\{(\d+)\}/g,function(e,t){return void 0!==l[t]?l[t]:e})}function e(){if(v.infotext){var e=m.select1.find("option").length,t=m.select2.find("option").length,l=m.originalselect.find("option").length-g,i=g,o="";o=0===l?v.infotextempty:s(e===l?v.infotext:v.infotextfiltered,[e,l]),m.info1.html(o),m.box1.toggleClass("filtered",!(e===l||0===l)),o=0===i?v.infotextempty:s(t===i?v.infotext:v.infotextfiltered,[t,i]),m.info2.html(o),m.box2.toggleClass("filtered",!(t===i||0===i))}}function r(){m.select1.find("option").each(function(e,t){var l=y(t);m.originalselect.find("option").eq(l.data("original-index")).data("_selected",l.prop("selected"))})}function c(){m.select2.find("option").each(function(e,t){var l=y(t);m.originalselect.find("option").eq(l.data("original-index")).data("_selected",l.prop("selected"))})}function f(){r(),m.select1.empty().scrollTop(0);var o=new RegExp(y.trim(m.filterinput1.val()),"gi");m.originalselect.find("option").not(":selected").each(function(e,t){var l=y(t),i=!0;t.text.match(o)&&(i=!1,m.select1.append(l.clone(!0).prop("selected",l.data("_selected")))),m.originalselect.find("option").eq(l.data("original-index")).data("filtered1",i)}),e()}function p(){c(),m.select2.empty().scrollTop(0);var o=new RegExp(y.trim(m.filterinput2.val()),"gi");m.originalselect.find("option:selected").each(function(e,t){var l=y(t),i=!0;t.text.match(o)&&(i=!1,m.select2.append(l.clone(!0).prop("selected",l.data("_selected")))),m.originalselect.find("option").eq(l.data("original-index")).data("filtered2",i)}),e()}function t(e){e.find("option").sort(function(e,t){return y(e).data("original-index")>y(t).data("original-index")?1:-1}).appendTo(e)}function i(i,o){m.originalselect.find("option").each(function(e,t){var l=y(t);l.data("original-index")===i&&l.prop("selected",o)})}function d(){"all"===v.preserveselectiononmove?(r(),c()):"moved"===v.preserveselectiononmove&&r(),m.select1.find("option:selected").each(function(e,t){var l=y(t);l.data("filtered1")||i(l.data("original-index"),!0)}),a(),t(m.select2)}function u(){"all"===v.preserveselectiononmove?(r(),c()):"moved"===v.preserveselectiononmove&&c(),m.select2.find("option:selected").each(function(e,t){var l=y(t);l.data("filtered2")||i(l.data("original-index"),!1)}),a(),t(m.select1)}var l=y(this);if(!l.is("select"))return l.find("select").each(function(e,t){y(t).bootstrapDualListbox(h)});if(l.data("duallistbox_generated"))return this;var b,v=y.extend({bootstrap2compatible:!1,preserveselectiononmove:!1,moveonselect:!0,initialfilterfrom:"",initialfilterto:"",helperselectnamepostfix:"_helper",infotext:"Showing all {0}",infotextfiltered:'<span class="label label-warning">Filtered</span> {0} from {1}',infotextempty:"Empty list",selectorminimalheight:100,showfilterinputs:!0,filterplaceholder:"Filter",filtertextclear:"show all",nonselectedlistlabel:!1,selectedlistlabel:!1},h);b=v.bootstrap2compatible?y('<div class="row-fluid bootstrap-duallistbox-container bs2compatible"><div class="span6 box1"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-mini clear1 pull-right">'+v.filtertextclear+'</button></span><input placeholder="'+v.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn moveall" title="Move all"><i class="fa fa-arrow-right"></i><i class="fa fa-arrow-right"></i></button><button type="button" class="btn move" title="Move selected"><i class="fa fa-arrow-right"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div><div class="span6 box2"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-mini clear2 pull-right">'+v.filtertextclear+'</button></span><input placeholder="'+v.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn remove" title="Remove selected"><i class="fa fa-arrow-left"></i></button><button type="button" class="btn removeall" title="Remove all"><i class="fa fa-arrow-left"></i><i class="fa fa-arrow-left"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div></div>').insertBefore(l):y('<div class="row bootstrap-duallistbox-container"><div class="col-md-6 box1"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-primary btn-xs clear1 pull-right">'+v.filtertextclear+'</button></span><input placeholder="'+v.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn btn-primary moveall" title="Move all"><i class="fa fa-arrow-right"></i><i class="fa fa-arrow-right"></i></button><button type="button" class="btn btn-primary move" title="Move selected"><i class="fa fa-arrow-right"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div><div class="col-md-6 box2"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-primary btn-xs clear2 pull-right">'+v.filtertextclear+'</button></span><input placeholder="'+v.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn btn-primary remove" title="Remove selected"><i class="fa fa-arrow-left"></i></button><button type="button" class="btn btn-primary  removeall" title="Remove all"><i class="fa fa-arrow-left"></i><i class="fa fa-arrow-left"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div></div>').insertBefore(l);var m={originalselect:l,box1:y(".box1",b),box2:y(".box2",b),filterinput1:y(".box1 .filter",b),filterinput2:y(".box2 .filter",b),filter1clear:y(".box1 .clear1",b),filter2clear:y(".box2 .clear2",b),info1:y(".box1 .info",b),info2:y(".box2 .info",b),select1:y(".box1 select",b),select2:y(".box2 select",b),movebutton:y(".box1 .move",b),removebutton:y(".box2 .remove",b),moveallbutton:y(".box1 .moveall",b),removeallbutton:y(".box2 .removeall",b),form:y(y(".box1 .filter",b)[0].form)},o=0,g=0,x=/android/i.test(navigator.userAgent.toLowerCase());!function(){x&&(v.moveonselect=!0,v.preserveselectiononmove=!1),v.moveonselect&&b.addClass("moveonselect");var e=m.originalselect.attr("name")||"";if(v.nonselectedlistlabel){var t="bootstrap-duallistbox-nonselected-list_"+e;m.box1.prepend('<label for="'+t+'">'+v.nonselectedlistlabel+"</label>"),m.select1.prop("id",t)}if(v.selectedlistlabel){var l="bootstrap-duallistbox-selected-list_"+e;m.box2.prepend('<label for="'+l+'">'+v.selectedlistlabel+"</label>"),m.select2.prop("id",l)}v.helperselectnamepostfix&&(m.select1.attr("name",e+v.helperselectnamepostfix+"1"),m.select2.attr("name",e+v.helperselectnamepostfix+"2"));var i=m.originalselect.attr("class");void 0!==i&&i&&((i=i.match(/\bspan[1-9][0-2]?/))||(i=(i=m.originalselect.attr("class")).match(/\bcol-md-[1-9][0-2]?/))),i&&b.addClass(i.toString());var o=m.originalselect.height()<v.selectorminimalheight?v.selectorminimalheight:m.originalselect.height();m.select1.height(o),m.select2.height(o),m.originalselect.addClass("hide"),n(),v.showfilterinputs?(m.filterinput1.val(v.initialfilterfrom),m.filterinput2.val(v.initialfilterto)):(m.filterinput1.hide(),m.filterinput2.hide()),m.form.submit(function(e){m.filterinput1.is(":focus")?(e.preventDefault(),m.filterinput1.focusout()):m.filterinput2.is(":focus")&&(e.preventDefault(),m.filterinput2.focusout())}),m.originalselect.on("bootstrapduallistbox.refresh",function(e,t){n(),t?m.select1.find("option").each(function(){m.originalselect.find("option").data("_selected",!1)}):(r(),c()),a()}),m.filter1clear.on("click",function(){m.filterinput1.val(""),a()}),m.filter2clear.on("click",function(){m.filterinput2.val(""),a()}),m.movebutton.on("click",function(){d()}),m.moveallbutton.on("click",function(){"all"===v.preserveselectiononmove?(r(),c()):"moved"===v.preserveselectiononmove&&r(),m.originalselect.find("option").each(function(e,t){var l=y(t);l.data("filtered1")||l.prop("selected",!0)}),a()}),m.removebutton.on("click",function(){u()}),m.removeallbutton.on("click",function(){"all"===v.preserveselectiononmove?(r(),c()):"moved"===v.preserveselectiononmove&&c(),m.originalselect.find("option").each(function(e,t){var l=y(t);l.data("filtered2")||l.prop("selected",!1)}),a()}),m.filterinput1.on("change keyup",function(){f()}),m.filterinput2.on("change keyup",function(){p()}),v.moveonselect&&(v.preserveselectiononmove=!1,m.select1.on("change",function(){d()}),m.select2.on("change",function(){u()})),a()}()})}}(jQuery);