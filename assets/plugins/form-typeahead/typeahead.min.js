!function(p){var r,t,e,i,s,g={isMsie:function(){var t=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return!!t&&parseInt(t[2],10)},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:p.isArray,isFunction:p.isFunction,isObject:p.isPlainObject,isUndefined:function(t){return void 0===t},bind:p.proxy,bindAll:function(t){var e;for(var i in t)p.isFunction(e=t[i])&&(t[i]=p.proxy(e,t))},indexOf:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},each:p.each,map:p.map,filter:p.grep,every:function(i,n){var s=!0;return i?(p.each(i,function(t,e){return!!(s=n.call(null,e,t,i))&&void 0}),!!s):s},some:function(i,n){var s=!1;return i?(p.each(i,function(t,e){return!(s=n.call(null,e,t,i))&&void 0}),!!s):s},mixin:p.extend,getUniqueId:(t=0,function(){return t++}),defer:function(t){setTimeout(t,0)},debounce:function(s,r,o){var u,a;return function(){var t,e,i=this,n=arguments;return t=function(){u=null,o||(a=s.apply(i,n))},e=o&&!u,clearTimeout(u),u=setTimeout(t,r),e&&(a=s.apply(i,n)),a}},throttle:function(i,n){var s,r,o,u,a,c;return a=0,c=function(){a=new Date,o=null,u=i.apply(s,r)},function(){var t=new Date,e=n-(t-a);return s=this,r=arguments,e<=0?(clearTimeout(o),o=null,a=t,u=i.apply(s,r)):o||(o=setTimeout(c,e)),u}},tokenizeQuery:function(t){return p.trim(t).toLowerCase().split(/[\s]+/)},tokenizeText:function(t){return p.trim(t).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},n=(r=/\s+/,{on:function(t,e){var i;if(!e)return this;for(this._callbacks=this._callbacks||{},t=t.split(r);i=t.shift();)this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push(e);return this},trigger:function(t,e){var i,n;if(!this._callbacks)return this;for(t=t.split(r);i=t.shift();)if(n=this._callbacks[i])for(var s=0;s<n.length;s+=1)n[s].call(this,{type:i,data:e});return this}}),o=function(){function t(t){t&&t.el||p.error("EventBus initialized without el"),this.$el=p(t.el)}return g.mixin(t.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+t,e)}}),t}(),u=function(){function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function n(){return(new Date).getTime()}function s(t){return JSON.stringify(g.isUndefined(t)?null:t)}function i(t){return JSON.parse(t)}var r,e;try{(r=window.localStorage).setItem("~~~","!"),r.removeItem("~~~")}catch(t){r=null}return e=r&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),i(r.getItem(this._prefix(t)))},set:function(t,e,i){return g.isNumber(i)?r.setItem(this._ttlKey(t),s(n()+i)):r.removeItem(this._ttlKey(t)),r.setItem(this._prefix(t),s(e))},remove:function(t){return r.removeItem(this._ttlKey(t)),r.removeItem(this._prefix(t)),this},clear:function(){var t,e,i=[],n=r.length;for(t=0;t<n;t++)(e=r.key(t)).match(this.keyMatcher)&&i.push(e.replace(this.keyMatcher,""));for(t=i.length;t--;)this.remove(i[t]);return this},isExpired:function(t){var e=i(r.getItem(this._ttlKey(t)));return!!(g.isNumber(e)&&n()>e)}}:{get:g.noop,set:g.noop,remove:g.noop,clear:g.noop,isExpired:g.noop},g.mixin(t.prototype,e),t}(),a=function(){function t(t){g.bindAll(this),t=t||{},this.sizeLimit=t.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return g.mixin(t.prototype,{get:function(t){return this.cache[t]},set:function(t,e){var i;this.cachedKeysByAge.length===this.sizeLimit&&(i=this.cachedKeysByAge.shift(),delete this.cache[i]),this.cache[t]=e,this.cachedKeysByAge.push(t)}}),t}(),d=function(){function t(t){g.bindAll(this),t=g.isString(t)?{url:t}:t,o=o||new a,e=g.isNumber(t.maxParallelRequests)?t.maxParallelRequests:e||6,this.url=t.url,this.wildcard=t.wildcard||"%QUERY",this.filter=t.filter,this.replace=t.replace,this.ajaxSettings={type:"get",cache:t.cache,timeout:t.timeout,dataType:t.dataType||"json",beforeSend:t.beforeSend},this._get=(/^throttle$/i.test(t.rateLimitFn)?g.throttle:g.debounce)(this._get,t.rateLimitWait||300)}var e,o,r=0,n={};return g.mixin(t.prototype,{_get:function(i,n){var s=this;r<e?this._sendRequest(i).done(function(t){var e=s.filter?s.filter(t):t;n&&n(e),o.set(i,t)}):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(t){var e=this,i=n[t];return i||(r++,i=n[t]=p.ajax(t,this.ajaxSettings).always(function(){r--,n[t]=null,e.onDeckRequestArgs&&(e._get.apply(e,e.onDeckRequestArgs),e.onDeckRequestArgs=null)})),i},get:function(t,e){var i,n,s=this,r=encodeURIComponent(t||"");return e=e||g.noop,i=this.replace?this.replace(this.url,r):this.url.replace(this.wildcard,r),(n=o.get(i))?g.defer(function(){e(s.filter?s.filter(n):n)}):this._get(i,e),!!n}}),t}(),c=function(){function t(t){var e,i,n,s;g.bindAll(this),g.isString(t.template)&&!t.engine&&p.error("no template engine specified"),t.local||t.prefetch||t.remote||p.error("one of local, prefetch, or remote is required"),this.name=t.name||g.getUniqueId(),this.limit=t.limit||5,this.minLength=t.minLength||1,this.header=t.header,this.footer=t.footer,this.valueKey=t.valueKey||"value",this.template=(e=t.template,i=t.engine,n=this.valueKey,g.isFunction(e)?e:g.isString(e)?(s=i.compile(e),g.bind(s.render,s)):function(t){return"<p>"+t[n]+"</p>"}),this.local=t.local,this.prefetch=t.prefetch,this.remote=t.remote,this.itemHash={},this.adjacencyList={},this.storage=t.name?new u(t.name):null}var a="thumbprint",c="protocol",h="itemHash",l="adjacencyList";return g.mixin(t.prototype,{_processLocalData:function(t){this._mergeProcessedData(this._processData(t))},_loadPrefetchData:function(r){var t,e,i,n,s,o=this,u="0.9.3"+(r.thumbprint||"");return this.storage&&(t=this.storage.get(a),e=this.storage.get(c),i=this.storage.get(h),n=this.storage.get(l)),s=t!==u||e!==g.getProtocol(),(r=g.isString(r)?{url:r}:r).ttl=g.isNumber(r.ttl)?r.ttl:864e5,i&&n&&!s?(this._mergeProcessedData({itemHash:i,adjacencyList:n}),p.Deferred().resolve()):p.getJSON(r.url).done(function(t){var e=r.filter?r.filter(t):t,i=o._processData(e),n=i.itemHash,s=i.adjacencyList;o.storage&&(o.storage.set(h,n,r.ttl),o.storage.set(l,s,r.ttl),o.storage.set(a,u,r.ttl),o.storage.set(c,g.getProtocol(),r.ttl)),o._mergeProcessedData(i)})},_transformDatum:function(t){var e=g.isString(t)?t:t[this.valueKey],i={value:e,tokens:t.tokens||g.tokenizeText(e)};return g.isString(t)?(i.datum={},i.datum[this.valueKey]=t):i.datum=t,i.tokens=g.filter(i.tokens,function(t){return!g.isBlankString(t)}),i.tokens=g.map(i.tokens,function(t){return t.toLowerCase()}),i},_processData:function(t){var n=this,r={},o={};return g.each(t,function(t,e){var i=n._transformDatum(e),s=g.getUniqueId(i.value);r[s]=i,g.each(i.tokens,function(t,e){var i=e.charAt(0),n=o[i]||(o[i]=[s]);!~g.indexOf(n,s)&&n.push(s)})}),{itemHash:r,adjacencyList:o}},_mergeProcessedData:function(t){var n=this;g.mixin(this.itemHash,t.itemHash),g.each(t.adjacencyList,function(t,e){var i=n.adjacencyList[t];n.adjacencyList[t]=i?i.concat(e):e})},_getLocalSuggestions:function(n){var s,r=this,o=[],u=[],a=[];return g.each(n,function(t,e){var i=e.charAt(0);!~g.indexOf(o,i)&&o.push(i)}),g.each(o,function(t,e){var i=r.adjacencyList[e];return!!i&&(u.push(i),void((!s||i.length<s.length)&&(s=i)))}),u.length<o.length?[]:(g.each(s,function(t,e){var i=r.itemHash[e];g.every(u,function(t){return~g.indexOf(t,e)})&&g.every(n,function(e){return g.some(i.tokens,function(t){return 0===t.indexOf(e)})})&&a.push(i)}),a)},initialize:function(){var t;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new d(this.remote):null,t=this.prefetch?this._loadPrefetchData(this.prefetch):p.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return t},t},getSuggestions:function(t,e){var i,n,s=this,r=!1;t.length<this.minLength||(i=g.tokenizeQuery(t),(n=this._getLocalSuggestions(i).slice(0,this.limit)).length<this.limit&&this.transport&&(r=this.transport.get(t,function(t){n=n.slice(0),g.each(t,function(t,e){var i=s._transformDatum(e);return!g.some(n,function(t){return i.value===t.value})&&n.push(i),n.length<s.limit}),e&&e(n)})),!r&&e&&e(n))}}),t}(),h=function(){function t(t){var e,i=this;g.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=p(t.hint),this.$input=p(t.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),g.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){i.specialKeyCodeMap[t.which||t.keyCode]||g.defer(i._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=(e=this.$input,p("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e))}return g.mixin(t.prototype,n,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(t){var e=this.specialKeyCodeMap[t.which||t.keyCode];e&&this.trigger(e+"Keyed",t)},_compareQueryToInputValue:function(){var t,e,i=this.getInputValue(),n=(t=this.query,e=i,(t=(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "))===(e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")));!!n&&this.query.length!==i.length?this.trigger("whitespaceChanged",{value:this.query}):n||this.trigger("queryChanged",{value:this.query=i})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),!e&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(t){this.$hint.val(t)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var t,e=this.$input.val().length,i=this.$input[0].selectionStart;return g.isNumber(i)?i===e:!document.selection||((t=document.selection.createRange()).moveStart("character",-e),e===t.text.length)}}),t}(),l=function(){function t(t){g.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=p(t.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function r(t){return t.data("suggestion")}var c='<span class="tt-suggestions"></span>',h={display:"block"},l={whiteSpace:"nowrap",cursor:"pointer"},d={whiteSpace:"normal"};return g.mixin(t.prototype,n,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(t){var e=p(t.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),e.addClass("tt-is-under-cursor")},_handleSelection:function(t){var e=p(t.currentTarget);this.trigger("suggestionSelected",r(e))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(t){var e,i,n,s;if(this.isVisible()){if((i=(e=this._getSuggestions()).filter(".tt-is-under-cursor")).removeClass("tt-is-under-cursor"),-1===(n=((n=e.index(i)+t)+1)%(e.length+1)-1))return void this.trigger("cursorRemoved");n<-1&&(n=e.length-1),s=e.eq(n).addClass("tt-is-under-cursor"),this._ensureVisibility(s),this.trigger("cursorMoved",r(s))}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(t){var e=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),i=this.$menu.scrollTop(),n=t.position().top,s=n+t.outerHeight(!0);n<0?this.$menu.scrollTop(i+n):e<s&&this.$menu.scrollTop(i+(s-e))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){"ltr"===t?this.$menu.css({left:"0",right:"auto"}):this.$menu.css({left:"auto",right:" 0"})},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var t=this._getSuggestions().filter(".tt-is-under-cursor").first();return 0<t.length?r(t):null},getFirstSuggestion:function(){var t=this._getSuggestions().first();return 0<t.length?r(t):null},renderSuggestions:function(i,t){var n,e,s,r,o,u="tt-dataset-"+i.name,a=this.$menu.find("."+u);0===a.length&&(e=p(c).css(h),a=p("<div></div>").addClass(u).append(i.header).append(e).append(i.footer).appendTo(this.$menu)),0<t.length?(this.isEmpty=!1,this.isOpen&&this._show(),s=document.createElement("div"),r=document.createDocumentFragment(),g.each(t,function(t,e){e.dataset=i.name,n=i.template(e.datum),s.innerHTML='<div class="tt-suggestion">%body</div>'.replace("%body",n),(o=p(s.firstChild).css(l).data("suggestion",e)).children().each(function(){p(this).css(d)}),r.appendChild(o[0])}),a.show().find(".tt-suggestions").html(r)):this.clearSuggestions(i.name),this.trigger("suggestionsRendered")},clearSuggestions:function(t){var e=t?this.$menu.find(".tt-dataset-"+t):this.$menu.find('[class^="tt-dataset-"]'),i=e.find(".tt-suggestions");e.hide(),i.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),t}(),f=function(){function t(t){var e,i,n;g.bindAll(this),this.$node=function(t){var e=p(r.wrapper),i=p(r.dropdown),n=p(t),s=p(r.hint);e=e.css(o.wrapper),i=i.css(o.dropdown),s.css(o.hint).css({backgroundAttachment:n.css("background-attachment"),backgroundClip:n.css("background-clip"),backgroundColor:n.css("background-color"),backgroundImage:n.css("background-image"),backgroundOrigin:n.css("background-origin"),backgroundPosition:n.css("background-position"),backgroundRepeat:n.css("background-repeat"),backgroundSize:n.css("background-size")}),n.data("ttAttrs",{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(o.query);try{!n.attr("dir")&&n.attr("dir","auto")}catch(t){}return n.wrap(e).parent().prepend(s).append(i)}(t.input),this.datasets=t.datasets,this.dir=null,this.eventBus=t.eventBus,e=this.$node.find(".tt-dropdown-menu"),i=this.$node.find(".tt-query"),n=this.$node.find(".tt-hint"),this.dropdownView=new l({menu:e}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new h({input:i,hint:n}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}var r={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},o={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return g.isMsie()&&g.mixin(o.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),g.isMsie()&&g.isMsie()<=7&&(g.mixin(o.wrapper,{display:"inline",zoom:"1"}),g.mixin(o.query,{marginTop:"-1px"})),g.mixin(t.prototype,n,{_managePreventDefault:function(t){var e,i,n=t.data,s=!1;switch(t.type){case"tabKeyed":e=this.inputView.getHintValue(),i=this.inputView.getInputValue(),s=e&&e!==i;break;case"upKeyed":case"downKeyed":s=!n.shiftKey&&!n.ctrlKey&&!n.metaKey}s&&n.preventDefault()},_setLanguageDirection:function(){var t=this.inputView.getLanguageDirection();t!==this.dir&&(this.dir=t,this.$node.css("direction",t),this.dropdownView.setLanguageDirection(t))},_updateHint:function(){var t,e,i,n,s=this.dropdownView.getFirstSuggestion(),r=s?s.value:null,o=this.dropdownView.isVisible(),u=this.inputView.isOverflow();r&&o&&!u&&(e=(t=this.inputView.getInputValue()).replace(/\s{2,}/g," ").replace(/^\s+/g,""),i=g.escapeRegExChars(e),n=new RegExp("^(?:"+i+")(.*$)","i").exec(r),this.inputView.setHintValue(t+(n?n[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(t){var e=t.data;this.inputView.setInputValue(e.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(t){this.dropdownView["blured"===t.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(t){var e=t.data;e.shiftKey||e.ctrlKey||e.metaKey||this.dropdownView["upKeyed"===t.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(t){var e="suggestionSelected"===t.type,i=e?t.data:this.dropdownView.getSuggestionUnderCursor();i&&(this.inputView.setInputValue(i.value),e?this.inputView.focus():t.data.preventDefault(),e&&g.isMsie()?g.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",i.datum,i.dataset))},_getSuggestions:function(){var i=this,n=this.inputView.getQuery();g.isBlankString(n)||g.each(this.datasets,function(t,e){e.getSuggestions(n,function(t){n===i.inputView.getQuery()&&i.dropdownView.renderSuggestions(e,t)})})},_autocomplete:function(t){var e,i,n,s,r;("rightKeyed"!==t.type&&"leftKeyed"!==t.type||(e=this.inputView.isCursorAtEnd(),i="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===t.type:"rightKeyed"===t.type,e&&!i))&&(n=this.inputView.getQuery(),""!==(s=this.inputView.getHintValue())&&n!==s&&(r=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(r.value),this.eventBus.trigger("autocompleted",r.datum,r.dataset)))},_propagateEvent:function(t){this.eventBus.trigger(t.type)},destroy:function(){var t,i;this.inputView.destroy(),this.dropdownView.destroy(),t=this.$node,i=t.find(".tt-query"),g.each(i.data("ttAttrs"),function(t,e){g.isUndefined(e)?i.removeAttr(t):i.attr(t,e)}),i.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(t),t.remove(),this.$node=null},setQuery:function(t){this.inputView.setQuery(t),this.inputView.setInputValue(t),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),t}();i={},s="ttView",e={initialize:function(t){var n;return 0===(t=g.isArray(t)?t:[t]).length&&p.error("no datasets provided"),n=g.map(t,function(t){var e=i[t.name]?i[t.name]:new c(t);return t.name&&(i[t.name]=e),e}),this.each(function(){var t,e=p(this),i=new o({el:e});t=g.map(n,function(t){return t.initialize()}),e.data(s,new f({input:e,eventBus:i=new o({el:e}),datasets:n})),p.when.apply(p,t).always(function(){g.defer(function(){i.trigger("initialized")})})})},destroy:function(){return this.each(function(){var t=p(this),e=t.data(s);e&&(e.destroy(),t.removeData(s))})},setQuery:function(e){return this.each(function(){var t=p(this).data(s);t&&t.setQuery(e)})}},jQuery.fn.typeahead=function(t){return e[t]?e[t].apply(this,[].slice.call(arguments,1)):e.initialize.apply(this,arguments)}}(window.jQuery);