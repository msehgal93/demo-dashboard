!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(o){"use strict";var r=o.blueimp.fileupload.prototype.options.add;o.widget("blueimp.fileupload",o.blueimp.fileupload,{options:{processQueue:[],add:function(e,s){var i=o(this);s.process(function(){return i.fileupload("process",s)}),r.call(this,e,s)}},processActions:{},_processFile:function(e){var r=this,t=o.Deferred().resolveWith(r,[e]).promise();return this._trigger("process",null,e),o.each(e.processQueue,function(e,s){var i=function(e){return r.processActions[s.action].call(r,e,s)};t=t.pipe(i,s.always&&i)}),t.done(function(){r._trigger("processdone",null,e),r._trigger("processalways",null,e)}).fail(function(){r._trigger("processfail",null,e),r._trigger("processalways",null,e)}),t},_transformProcessQueue:function(t){var s=[];o.each(t.processQueue,function(){var i={},e=this.action,r=!0===this.prefix?e:this.prefix;o.each(this,function(e,s){"string"===o.type(s)&&"@"===s.charAt(0)?i[e]=t[s.slice(1)||(r?r+e.charAt(0).toUpperCase()+e.slice(1):e)]:i[e]=s}),s.push(i)}),t.processQueue=s},processing:function(){return this._processing},process:function(e){var r=this,t=o.extend({},this.options,e);return t.processQueue&&t.processQueue.length&&(this._transformProcessQueue(t),0===this._processing&&this._trigger("processstart"),o.each(e.files,function(e){var s=e?o.extend({},t):t,i=function(){return r._processFile(s)};s.index=e,r._processing+=1,r._processingQueue=r._processingQueue.pipe(i,i).always(function(){r._processing-=1,0===r._processing&&r._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=o.Deferred().resolveWith(this).promise()}})});