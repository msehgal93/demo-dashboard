!function(t){var o,a,r,s,d=!1,i=300,l={overlay:!0,expandOnFocus:!1,transition:"fade",placeholder:"",maxWidth:"",maxHeight:"",onExpand:function(){},onMinimize:function(){}},c={init:function(e){if(l=l||{},t.extend(!0,l,l),t.extend(!0,l,e),(o=t(this)).is("textarea")){var i=""!==t.trim(o.val())?o.val():"";o.hide();var n=t('<div class="fs-editor-wrapper">                     <div class="fs-editor"><a href="#" class="fs-icon"></a>                     <div class="fs-editable" contenteditable="true"></div>                     </div></div>').insertAfter(this);return a=n.find(".fs-editor"),r=a.find(".fs-editable"),s=a.find(".fs-icon"),r.css("min-height",o.css("height")).parent(".fs-editor-wrapper").css("min-height",o.css("height")),t(window).on("keyup.fseditor",function(e){27==e.keyCode&&d&&c.minimize()}),l.expandOnFocus&&r.on("focus.fseditor",function(){c.expand()}),s.on("click.fseditor.icon",function(e){e.preventDefault(),c[d?"minimize":"expand"]()}),l.placeholder&&""==o.val()?c.placeholder():""!=o.val()&&r.html(i),a.closest("form").on("submit",function(e){var i=r.html().replace(/<div>/gi,"<br>").replace(/<\/div>/gi,"");o.html(i==l.placeholder?"":i)}),this}t.error("Error initializing FSEditor Plugin. It can only work on <textarea> element.")},showOverlay:function(){return t('<div class="fs-editor-overlay" />').appendTo("body").fadeTo(""==l.transition?0:i,1).click(function(){c.minimize()}),this},removeOverlay:function(){var e=t(".fs-editor-overlay");return e.length&&e.fadeTo(""==l.transition?0:i,0,function(){t(this).remove()}),this},expand:function(){return"fade"==l.transition&&a.fadeTo(0,0),l.maxWidth&&a.css("max-width",l.maxWidth),l.maxHeight&&a.css("max-height",l.maxHeight),l.overlay&&c.showOverlay(),t(window).on("resize.fseditor",function(){f(a)}),a.addClass("expanded transition-"+l.transition),n.fx(l.transition),this},minimize:function(){return t(window).off("resize.fseditor",f(a)),a.removeClass("expanded transition-"+l.transition).css({"max-width":"none","max-height":"none"}),"fade"==l.transition&&a.fadeTo(0,0),l.overlay&&c.removeOverlay(),n.fx(l.transition),this},placeholder:function(){if("string"==typeof l.placeholder)return r.addClass("placeholder").html(l.placeholder).on({focus:function(){r.html()==l.placeholder&&r.html("").removeClass("placeholder")},blur:function(){""==r.html()&&r.html(l.placeholder).addClass("placeholder")}}),this},destroy:function(){return c.removeOverlay(),o.show().nextAll(".fs-editor-wrapper").remove(),t(window).off("keyup.fseditor").off("resize.fseditor"),this}},n={fx:function(e){switch(f(a),e){case"fade":d?c.fadeComplete("minimize"):a.fadeTo(i,1,c.fadeComplete("expand"));break;case"slide-in":d?c.slideInComplete("minimize"):c.slideInComplete("expand");break;default:d?c.noTransition("minimize"):c.noTransition("expand")}},noTransition:function(e){"expand"==e?(l.placeholder||r.focus(),a.css("opacity",1),d=!0,l.onExpand.call(this)):"minimize"==e&&(l.placeholder||r.focus(),d=!1,l.onMinimize.call(this))},fadeComplete:function(e){"expand"==e?(l.placeholder||r.focus(),d=!0,l.onExpand.call(this)):"minimize"==e&&(a.fadeTo(0,1),l.placeholder||r.focus(),d=!1,l.onMinimize.call(this))},slideInComplete:function(e){"expand"==e?(a.css({top:-999,opacity:1}).animate({top:0|(t(window).height()-a.height())/2},i),d=!0,l.onExpand.call(this)):"minimize"==e&&(a.animate({top:-999},i),d=!1,l.onMinimize.call(this))}};function f(e){var i=0|(t(window).height()-e.height())/2,n=0|(t(window).width()-e.width())/2;e.css({top:i,left:n})}t.fn.fseditor=function(e){return t.extend(c,n),c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.fseditor"):c.init.apply(this,arguments)}}(jQuery);