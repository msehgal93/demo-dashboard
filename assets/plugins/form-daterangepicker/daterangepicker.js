!function(u){var s=function(t,a,e){var i,s="object"==typeof a;this.startDate=moment().startOf("day"),this.endDate=moment().startOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.ranges={},this.opens="right",this.buttonClasses=["btn","btn-small"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment()._lang._weekdaysMin.slice(),monthNames:moment()._lang._monthsShort.slice(),firstDay:0},this.cb=function(){},this.parentEl="body",this.element=u(t),this.element.hasClass("pull-right")&&(this.opens="left"),this.element.is("input")?this.element.on({click:u.proxy(this.show,this),focus:u.proxy(this.show,this)}):this.element.on("click",u.proxy(this.show,this)),i=this.locale,s&&("object"==typeof a.locale&&u.each(i,function(t,e){i[t]=a.locale[t]||e}),a.applyClass&&(this.applyClass=a.applyClass),a.cancelClass&&(this.cancelClass=a.cancelClass));var n='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input" style="float: left"><label for="daterangepicker_start">'+this.locale.fromLabel+'</label><input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div class="daterangepicker_end_input" style="float: left;"><label for="daterangepicker_end">'+this.locale.toLabel+'</label><input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="'+this.applyClass+' applyBtn" disabled="disabled">'+this.locale.applyLabel+'</button>&nbsp;<button class="'+this.cancelClass+' cancelBtn">'+this.locale.cancelLabel+"</button></div></div></div>";if(this.parentEl=s&&a.parentEl&&u(a.parentEl)||u(this.parentEl),this.container=u(n).appendTo(this.parentEl),s){if("string"==typeof a.format&&(this.format=a.format),"string"==typeof a.separator&&(this.separator=a.separator),"string"==typeof a.startDate&&(this.startDate=moment(a.startDate,this.format)),"string"==typeof a.endDate&&(this.endDate=moment(a.endDate,this.format)),"string"==typeof a.minDate&&(this.minDate=moment(a.minDate,this.format)),"string"==typeof a.maxDate&&(this.maxDate=moment(a.maxDate,this.format)),"object"==typeof a.startDate&&(this.startDate=moment(a.startDate)),"object"==typeof a.endDate&&(this.endDate=moment(a.endDate)),"object"==typeof a.minDate&&(this.minDate=moment(a.minDate)),"object"==typeof a.maxDate&&(this.maxDate=moment(a.maxDate)),"object"==typeof a.ranges){for(var r in a.ranges){var o=moment(a.ranges[r][0]),h=moment(a.ranges[r][1]);this.minDate&&o.isBefore(this.minDate)&&(o=moment(this.minDate)),this.maxDate&&h.isAfter(this.maxDate)&&(h=moment(this.maxDate)),this.minDate&&h.isBefore(this.minDate)||this.maxDate&&o.isAfter(this.maxDate)||(this.ranges[r]=[o,h])}var l="<ul>";for(var r in this.ranges)l+="<li>"+r+"</li>";l+="<li>"+this.locale.customRangeLabel+"</li>",l+="</ul>",this.container.find(".ranges").prepend(l)}if("object"==typeof a.dateLimit&&(this.dateLimit=a.dateLimit),"object"==typeof a.locale&&"number"==typeof a.locale.firstDay){this.locale.firstDay=a.locale.firstDay;for(var d=a.locale.firstDay;0<d;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),d--}"string"==typeof a.opens&&(this.opens=a.opens),"boolean"==typeof a.showWeekNumbers&&(this.showWeekNumbers=a.showWeekNumbers),"string"==typeof a.buttonClasses&&(this.buttonClasses=[a.buttonClasses]),"object"==typeof a.buttonClasses&&(this.buttonClasses=a.buttonClasses),"boolean"==typeof a.showDropdowns&&(this.showDropdowns=a.showDropdowns),"boolean"==typeof a.timePicker&&(this.timePicker=a.timePicker),"number"==typeof a.timePickerIncrement&&(this.timePickerIncrement=a.timePickerIncrement),"boolean"==typeof a.timePicker12Hour&&(this.timePicker12Hour=a.timePicker12Hour)}this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.startOf("day"));var c=this.container;if(u.each(this.buttonClasses,function(t,e){c.find("button").addClass(e)}),"right"==this.opens){var m=this.container.find(".calendar.left"),f=this.container.find(".calendar.right");m.removeClass("left").addClass("right"),f.removeClass("right").addClass("left")}if(void 0!==a&&void 0!==a.ranges||(this.container.find(".calendar").show(),this.move()),"function"==typeof e&&(this.cb=e),this.container.addClass("opens"+this.opens),(!s||void 0===a.startDate&&void 0===a.endDate)&&u(this.element).is("input[type=text]")){var p=u(this.element).val().split(this.separator);2==p.length&&(o=moment(p[0],this.format),h=moment(p[1],this.format)),null!=o&&null!=h&&(this.startDate=o,this.endDate=h)}this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.leftCalendar={month:moment([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]},this.rightCalendar={month:moment([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]},this.container.on("mousedown",u.proxy(this.mousedown,this)),this.container.find(".calendar").on("click",".prev",u.proxy(this.clickPrev,this)),this.container.find(".calendar").on("click",".next",u.proxy(this.clickNext,this)),this.container.find(".ranges").on("click","button.applyBtn",u.proxy(this.clickApply,this)),this.container.find(".ranges").on("click","button.cancelBtn",u.proxy(this.clickCancel,this)),this.container.find(".ranges").on("click",".daterangepicker_start_input",u.proxy(this.showCalendars,this)),this.container.find(".ranges").on("click",".daterangepicker_end_input",u.proxy(this.showCalendars,this)),this.container.find(".calendar").on("click","td.available",u.proxy(this.clickDate,this)),this.container.find(".calendar").on("mouseenter","td.available",u.proxy(this.enterDate,this)),this.container.find(".calendar").on("mouseleave","td.available",u.proxy(this.updateView,this)),this.container.find(".ranges").on("click","li",u.proxy(this.clickRange,this)),this.container.find(".ranges").on("mouseenter","li",u.proxy(this.enterRange,this)),this.container.find(".ranges").on("mouseleave","li",u.proxy(this.updateView,this)),this.container.find(".calendar").on("change","select.yearselect",u.proxy(this.updateMonthYear,this)),this.container.find(".calendar").on("change","select.monthselect",u.proxy(this.updateMonthYear,this)),this.container.find(".calendar").on("change","select.hourselect",u.proxy(this.updateTime,this)),this.container.find(".calendar").on("change","select.minuteselect",u.proxy(this.updateTime,this)),this.container.find(".calendar").on("change","select.ampmselect",u.proxy(this.updateTime,this)),this.element.on("keyup",u.proxy(this.updateFromControl,this)),this.updateView(),this.updateCalendars()};s.prototype={constructor:s,mousedown:function(t){t.stopPropagation()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")&&this.element.val().length){var t=this.element.val().split(this.separator),e=moment(t[0],this.format),a=moment(t[1],this.format);null!=e&&null!=a&&(a.isBefore(e)||(this.startDate=e,this.endDate=a,this.notify(),this.updateCalendars()))}},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate)},move:function(){var t=this.parentEl.offset().top-(this.parentEl.is("body")?0:this.parentEl.scrollTop()),e=this.parentEl.offset().left-(this.parentEl.is("body")?0:this.parentEl.scrollLeft());"left"==this.opens?(this.container.css({top:this.element.offset().top+this.element.outerHeight()-t,right:u(window).width()-this.element.offset().left-this.element.outerWidth()-e,left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:this.element.offset().top+this.element.outerHeight()-t,left:this.element.offset().left-e,right:"auto"}),this.container.offset().left+this.container.outerWidth()>u(window).width()&&this.container.css({left:"auto",right:0}))},show:function(t){this.container.show(),this.move(),t&&(t.stopPropagation(),t.preventDefault()),u(document).on("mousedown",u.proxy(this.hide,this)),this.element.trigger("shown",{target:t.target,picker:this})},hide:function(t){this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),u(document).off("mousedown",this.hide),this.element.trigger("hidden",{picker:this})},enterRange:function(t){var e=t.target.innerHTML;if(e==this.locale.customRangeLabel)this.updateView();else{var a=this.ranges[e];this.container.find("input[name=daterangepicker_start]").val(a[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(a[1].format(this.format))}},showCalendars:function(){this.container.find(".calendar").show(),this.move()},updateInputText:function(){this.element.is("input")&&this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format))},clickRange:function(t){var e=t.target.innerHTML;if(e==this.locale.customRangeLabel)this.showCalendars();else{var a=this.ranges[e];this.startDate=a[0],this.endDate=a[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.startOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.container.find(".calendar").hide(),this.hide()}},clickPrev:function(t){u(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.subtract("month",1):this.rightCalendar.month.subtract("month",1),this.updateCalendars()},clickNext:function(t){u(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add("month",1):this.rightCalendar.month.add("month",1),this.updateCalendars()},enterDate:function(t){var e=u(t.target).attr("data-title"),a=e.substr(1,1),i=e.substr(3,1);u(t.target).parents(".calendar").hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[a][i].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[a][i].format(this.format))},clickDate:function(t){var e=u(t.target).attr("data-title"),a=e.substr(1,1),i=e.substr(3,1),s=u(t.target).parents(".calendar");if(s.hasClass("left")){var n=this.leftCalendar.calendar[a][i],r=this.endDate;if("object"==typeof this.dateLimit){var o=moment(n).add(this.dateLimit).startOf("day");r.isAfter(o)&&(r=o)}}else{n=this.startDate,r=this.rightCalendar.calendar[a][i];if("object"==typeof this.dateLimit){var h=moment(r).subtract(this.dateLimit).startOf("day");n.isBefore(h)&&(n=h)}}s.find("td").removeClass("active"),n.isSame(r)||n.isBefore(r)?(u(t.target).addClass("active"),this.startDate=n,this.endDate=r):n.isAfter(r)&&(u(t.target).addClass("active"),this.startDate=n,this.endDate=moment(n).add("day",1).startOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateCalendars()},clickApply:function(t){this.updateInputText(),this.hide()},clickCancel:function(t){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.updateView(),this.updateCalendars(),this.hide()},updateMonthYear:function(t){var e=u(t.target).closest(".calendar").hasClass("left"),a=this.container.find(".calendar.left");e||(a=this.container.find(".calendar.right"));var i=parseInt(a.find(".monthselect").val()),s=a.find(".yearselect").val();e?this.leftCalendar.month.month(i).year(s):this.rightCalendar.month.month(i).year(s),this.updateCalendars()},updateTime:function(t){var e=u(t.target).closest(".calendar").hasClass("left"),a=this.container.find(".calendar.left");e||(a=this.container.find(".calendar.right"));var i=parseInt(a.find(".hourselect").val()),s=parseInt(a.find(".minuteselect").val());if(this.timePicker12Hour){var n=a.find(".ampmselect").val();"PM"==n&&i<12&&(i+=12),"AM"==n&&12==i&&(i=0)}if(e){var r=this.startDate;r.hour(i),r.minute(s),this.startDate=r,this.leftCalendar.month.hour(i).minute(s)}else{var o=this.endDate;o.hour(i),o.minute(s),this.endDate=o,this.rightCalendar.month.hour(i).minute(s)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right"),this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate)),this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate)),this.container.find(".ranges li").removeClass("active");var t=!0,e=0;for(var a in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[a][0])&&this.endDate.isSame(this.ranges[a][1])&&(t=!1,this.container.find(".ranges li:eq("+e+")").addClass("active")):this.startDate.format("YYYY-MM-DD")==this.ranges[a][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[a][1].format("YYYY-MM-DD")&&(t=!1,this.container.find(".ranges li:eq("+e+")").addClass("active")),e++;t&&this.container.find(".ranges li:last").addClass("active")},buildCalendar:function(t,e,a,i,s){for(var n=moment([e,t,1]),r=moment(n).subtract("month",1).month(),o=moment(n).subtract("month",1).year(),h=moment([o,r]).daysInMonth(),l=n.day(),d=[],c=0;c<6;c++)d[c]=[];var m=h-l+this.locale.firstDay+1;h<m&&(m-=7),l==this.locale.firstDay&&(m=h-6);for(var f=moment([o,r,m,a,i]),p=(c=0,0),u=0;c<42;c++,p++,f=moment(f).add("day",1))0<c&&p%7==0&&(p=0,u++),d[u][p]=f;return d},renderDropdowns:function(t,e,a){for(var i=t.month(),s='<select class="monthselect">',n=0;n<12;n++)s+="<option value='"+n+"'"+(n===i?" selected='selected'":"")+">"+this.locale.monthNames[n]+"</option>";s+="</select>";for(var r=t.year(),o=a&&a.year()||r+5,h='<select class="yearselect">',l=e&&e.year()||r-50;l<=o;l++)h+='<option value="'+l+'"'+(l===r?' selected="selected"':"")+">"+l+"</option>";return s+(h+="</select>")},renderCalendar:function(t,e,a,i){var s='<div class="calendar-date">';s+='<table class="table-condensed">',s+="<thead>",s+="<tr>",this.showWeekNumbers&&(s+="<th></th>"),!a||a.isBefore(t[1][1])?s+='<th class="prev available"><i class="fa fa-arrow-left glyphicon glyphfa fa-arrow-left"></i></th>':s+="<th></th>";var n=this.locale.monthNames[t[1][1].month()]+t[1][1].format(" YYYY");this.showDropdowns&&(n=this.renderDropdowns(t[1][1],a,i)),s+='<th colspan="5" style="width: auto">'+n+"</th>",!i||i.isAfter(t[1][1])?s+='<th class="next available"><i class="fa fa-arrow-right glyphicon glyphfa fa-arrow-right"></i></th>':s+="<th></th>",s+="</tr>",s+="<tr>",this.showWeekNumbers&&(s+='<th class="week">'+this.locale.weekLabel+"</th>"),u.each(this.locale.daysOfWeek,function(t,e){s+="<th>"+e+"</th>"}),s+="</tr>",s+="</thead>",s+="<tbody>";for(var r=0;r<6;r++){s+="<tr>",this.showWeekNumbers&&(s+='<td class="week">'+t[r][0].week()+"</td>");for(var o=0;o<7;o++){var h="available ";h+=t[r][o].month()==t[1][1].month()?"":"off",a&&t[r][o].isBefore(a)||i&&t[r][o].isAfter(i)?h=" off disabled ":t[r][o].format("YYYY-MM-DD")==e.format("YYYY-MM-DD")?(h+=" active ",t[r][o].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(h+=" start-date "),t[r][o].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(h+=" end-date ")):t[r][o]>=this.startDate&&t[r][o]<=this.endDate&&(h+=" in-range ",t[r][o].isSame(this.startDate)&&(h+=" start-date "),t[r][o].isSame(this.endDate)&&(h+=" end-date "));var l="r"+r+"c"+o;s+='<td class="'+h.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+l+'">'+t[r][o].date()+"</td>"}s+="</tr>"}if(s+="</tbody>",s+="</table>",s+="</div>",this.timePicker){s+='<div class="calendar-time">',s+='<select class="hourselect">';var d=0,c=23,m=e.hour();this.timePicker12Hour&&(d=1,(c=12)<=m&&(m-=12),0==m&&(m=12));for(var f=d;f<=c;f++)s+=f==m?'<option value="'+f+'" selected="selected">'+f+"</option>":'<option value="'+f+'">'+f+"</option>";s+="</select> : ",s+='<select class="minuteselect">';for(f=0;f<60;f+=this.timePickerIncrement){var p=f;p<10&&(p="0"+p),f==e.minute()?s+='<option value="'+f+'" selected="selected">'+p+"</option>":s+='<option value="'+f+'">'+p+"</option>"}s+="</select> ",this.timePicker12Hour&&(s+='<select class="ampmselect">',12<=e.hour()?s+='<option value="AM">AM</option><option value="PM" selected="selected">PM</option>':s+='<option value="AM" selected="selected">AM</option><option value="PM">PM</option>',s+="</select>"),s+="</div>"}return s}},u.fn.daterangepicker=function(a,i){return this.each(function(){var t=u(this);if(!t.data("daterangepicker")){var e=new s(t,a,i);t.data("daterangepicker",e),e.notify()}}),this}}(window.jQuery);