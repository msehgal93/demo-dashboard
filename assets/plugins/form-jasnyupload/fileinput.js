!function(l){"use strict";var i="Microsoft Internet Explorer"==window.navigator.appName,n=function(e,t){if(this.$element=l(e),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||t.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=l('<input type="hidden" />'),this.$element.prepend(this.$hidden)),this.$preview=this.$element.find(".fileinput-preview");var i=this.$preview.css("height");"inline"!=this.$preview.css("display")&&"0px"!=i&&"none"!=i&&this.$preview.css("line-height",i),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()}};n.prototype.listen=function(){this.$input.on("change.bs.fileinput",l.proxy(this.change,this)),l(this.$input[0].form).on("reset.bs.fileinput",l.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",l.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",l.proxy(this.clear,this))},n.prototype.change=function(i){if(void 0===i.target.files&&(i.target.files=i.target&&i.target.value?[{name:i.target.value.replace(/^.+\\/,"")}]:[]),0!==i.target.files.length){this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var n=i.target.files[0];if(0<this.$preview.length&&(void 0!==n.type?n.type.match("image.*"):n.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var e=new FileReader,s=this.$preview,a=this.$element;e.onload=function(e){var t=l("<img>").attr("src",e.target.result);i.target.files[0].result=e.target.result,a.find(".fileinput-filename").text(n.name),"none"!=s.css("max-height")&&t.css("max-height",parseInt(s.css("max-height"),10)-parseInt(s.css("padding-top"),10)-parseInt(s.css("padding-bottom"),10)-parseInt(s.css("border-top"),10)-parseInt(s.css("border-bottom"),10)),s.html(t),a.addClass("fileinput-exists").removeClass("fileinput-new"),a.trigger("change.bs.fileinput",i.target.files)},e.readAsDataURL(n)}else this.$element.find(".fileinput-filename").text(n.name),this.$preview.text(n.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")}},n.prototype.clear=function(e){if(e&&e.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),i){var t=this.$input.clone(!0);this.$input.after(t),this.$input.remove(),this.$input=t}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),!1!==e&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},n.prototype.reset=function(){this.clear(!1),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},n.prototype.trigger=function(e){this.$input.trigger("click"),e.preventDefault()},l.fn.fileinput=function(i){return this.each(function(){var e=l(this),t=e.data("fileinput");t||e.data("fileinput",t=new n(this,i)),"string"==typeof i&&t[i]()})},l.fn.fileinput.Constructor=n,l(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(e){var t=l(this);if(!t.data("fileinput")){t.fileinput(t.data());var i=l(e.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');0<i.length&&(e.preventDefault(),i.trigger("click.bs.fileinput"))}})}(window.jQuery);