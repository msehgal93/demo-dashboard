!function(a,u){"use strict";var t,i;a.spiedEventsKey=function(t,e){return[u(t).selector,e].toString()},a.getFixtures=function(){return a.currentFixtures_=a.currentFixtures_||new a.Fixtures},a.getStyleFixtures=function(){return a.currentStyleFixtures_=a.currentStyleFixtures_||new a.StyleFixtures},a.Fixtures=function(){this.containerId="jasmine-fixtures",this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures"},a.Fixtures.prototype.set=function(t){return this.cleanUp(),this.createContainer_(t)},a.Fixtures.prototype.appendSet=function(t){this.addToContainer_(t)},a.Fixtures.prototype.preload=function(){this.read.apply(this,arguments)},a.Fixtures.prototype.load=function(){this.cleanUp(),this.createContainer_(this.read.apply(this,arguments))},a.Fixtures.prototype.appendLoad=function(){this.addToContainer_(this.read.apply(this,arguments))},a.Fixtures.prototype.read=function(){for(var t=[],e=arguments,r=e.length,n=0;n<r;n++)t.push(this.getFixtureHtml_(e[n]));return t.join("")},a.Fixtures.prototype.clearCache=function(){this.fixturesCache_={}},a.Fixtures.prototype.cleanUp=function(){u("#"+this.containerId).remove()},a.Fixtures.prototype.sandbox=function(t){var e=t||{};return u('<div id="sandbox" />').attr(e)},a.Fixtures.prototype.createContainer_=function(t){var e=u("<div>").attr("id",this.containerId).html(t);return u(document.body).append(e),e},a.Fixtures.prototype.addToContainer_=function(t){u(document.body).find("#"+this.containerId).append(t).length||this.createContainer_(t)},a.Fixtures.prototype.getFixtureHtml_=function(t){return void 0===this.fixturesCache_[t]&&this.loadFixtureIntoCache_(t),this.fixturesCache_[t]},a.Fixtures.prototype.loadFixtureIntoCache_=function(t){var e=this.makeFixtureUrl_(t),r=u.ajax({type:"GET",url:e+"?"+(new Date).getTime(),async:!1});this.fixturesCache_[t]=r.responseText},a.Fixtures.prototype.makeFixtureUrl_=function(t){return this.fixturesPath.match("/$")?this.fixturesPath+t:this.fixturesPath+"/"+t},a.Fixtures.prototype.proxyCallTo_=function(t,e){return this[t].apply(this,e)},a.StyleFixtures=function(){this.fixturesCache_={},this.fixturesNodes_=[],this.fixturesPath="spec/javascripts/fixtures"},a.StyleFixtures.prototype.set=function(t){this.cleanUp(),this.createStyle_(t)},a.StyleFixtures.prototype.appendSet=function(t){this.createStyle_(t)},a.StyleFixtures.prototype.preload=function(){this.read_.apply(this,arguments)},a.StyleFixtures.prototype.load=function(){this.cleanUp(),this.createStyle_(this.read_.apply(this,arguments))},a.StyleFixtures.prototype.appendLoad=function(){this.createStyle_(this.read_.apply(this,arguments))},a.StyleFixtures.prototype.cleanUp=function(){for(;this.fixturesNodes_.length;)this.fixturesNodes_.pop().remove()},a.StyleFixtures.prototype.createStyle_=function(t){var e=u("<div></div>").html(t).text(),r=u("<style>"+e+"</style>");this.fixturesNodes_.push(r),u("head").append(r)},a.StyleFixtures.prototype.clearCache=a.Fixtures.prototype.clearCache,a.StyleFixtures.prototype.read_=a.Fixtures.prototype.read,a.StyleFixtures.prototype.getFixtureHtml_=a.Fixtures.prototype.getFixtureHtml_,a.StyleFixtures.prototype.loadFixtureIntoCache_=a.Fixtures.prototype.loadFixtureIntoCache_,a.StyleFixtures.prototype.makeFixtureUrl_=a.Fixtures.prototype.makeFixtureUrl_,a.StyleFixtures.prototype.proxyCallTo_=a.Fixtures.prototype.proxyCallTo_,a.getJSONFixtures=function(){return a.currentJSONFixtures_=a.currentJSONFixtures_||new a.JSONFixtures},a.JSONFixtures=function(){this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures/json"},a.JSONFixtures.prototype.load=function(){return this.read.apply(this,arguments),this.fixturesCache_},a.JSONFixtures.prototype.read=function(){for(var t=arguments,e=t.length,r=0;r<e;r++)this.getFixtureData_(t[r]);return this.fixturesCache_},a.JSONFixtures.prototype.clearCache=function(){this.fixturesCache_={}},a.JSONFixtures.prototype.getFixtureData_=function(t){return this.loadFixtureIntoCache_(t),this.fixturesCache_[t]},a.JSONFixtures.prototype.loadFixtureIntoCache_=function(e){var r=this,n=this.fixturesPath.match("/$")?this.fixturesPath+e:this.fixturesPath+"/"+e;u.ajax({async:!1,cache:!1,dataType:"json",url:n,success:function(t){r.fixturesCache_[e]=t},error:function(t,e,r){throw new Error("JSONFixture could not be loaded: "+n+" (status: "+e+", message: "+r.message+")")}})},a.JSONFixtures.prototype.proxyCallTo_=function(t,e){return this[t].apply(this,e)},a.JQuery=function(){},a.JQuery.browserTagCaseIndependentHtml=function(t){return u("<div/>").append(t).html()},a.JQuery.elementToString=function(t){var e=u(t).get(0);return void 0===e||e.cloneNode?u("<div />").append(u(t).clone()).html():t.toString()},a.JQuery.matchersClass={},t=a.JQuery,i={spiedEvents:{},handlers:[]},t.events={spyOn:function(e,r){var t=function(t){i.spiedEvents[a.spiedEventsKey(e,r)]=a.util.argsToArray(arguments)};return u(e).on(r,t),i.handlers.push(t),{selector:e,eventName:r,handler:t,reset:function(){delete i.spiedEvents[a.spiedEventsKey(e,r)]}}},args:function(t,e){var r=i.spiedEvents[a.spiedEventsKey(t,e)];if(!r)throw"There is no spy for "+e+" on "+t.toString()+". Make sure to create a spy using spyOnEvent.";return r},wasTriggered:function(t,e){return!!i.spiedEvents[a.spiedEventsKey(t,e)]},wasTriggeredWith:function(t,e,r,n){var i=a.JQuery.events.args(t,e).slice(1);return"[object Array]"!==Object.prototype.toString.call(r)&&(i=i[0]),n.equals_(r,i)},wasPrevented:function(t,e){var r=i.spiedEvents[a.spiedEventsKey(t,e)],n=r?r[0]:void 0;return n&&n.isDefaultPrevented()},wasStopped:function(t,e){var r=i.spiedEvents[a.spiedEventsKey(t,e)],n=r?r[0]:void 0;return n&&n.isPropagationStopped()},cleanUp:function(){i.spiedEvents={},i.handlers=[]}},function(){var i={toHaveClass:function(t){return this.actual.hasClass(t)},toHaveCss:function(t){for(var e in t)if(this.actual.css(e)!==t[e])return!1;return!0},toBeVisible:function(){return this.actual.is(":visible")},toBeHidden:function(){return this.actual.is(":hidden")},toBeSelected:function(){return this.actual.is(":selected")},toBeChecked:function(){return this.actual.is(":checked")},toBeEmpty:function(){return this.actual.is(":empty")},toExist:function(){return u(document).find(this.actual).length},toHaveLength:function(t){return this.actual.length===t},toHaveAttr:function(t,e){return r(this.actual.attr(t),e)},toHaveProp:function(t,e){return r(this.actual.prop(t),e)},toHaveId:function(t){return this.actual.attr("id")==t},toHaveHtml:function(t){return this.actual.html()==a.JQuery.browserTagCaseIndependentHtml(t)},toContainHtml:function(t){var e=this.actual.html(),r=a.JQuery.browserTagCaseIndependentHtml(t);return 0<=e.indexOf(r)},toHaveText:function(t){var e=u.trim(this.actual.text());return t&&u.isFunction(t.test)?t.test(e):e==t},toContainText:function(t){var e=u.trim(this.actual.text());return t&&u.isFunction(t.test)?t.test(e):-1!=e.indexOf(t)},toHaveValue:function(t){return this.actual.val()===t},toHaveData:function(t,e){return r(this.actual.data(t),e)},toBe:function(t){return this.actual.is(t)},toContain:function(t){return this.actual.find(t).length},toBeMatchedBy:function(t){return this.actual.filter(t).length},toBeDisabled:function(t){return this.actual.is(":disabled")},toBeFocused:function(t){return this.actual[0]===this.actual[0].ownerDocument.activeElement},toHandle:function(t){var e=u._data(this.actual.get(0),"events");if(!e||!t||"string"!=typeof t)return!1;var r=t.split("."),n=r.shift(),i=r.slice(0).sort(),a=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");if(!e[n]||!r.length)return e[n]&&0<e[n].length;for(var s=0;s<e[n].length;s++){var o=e[n][s].namespace;if(a.test(o))return!0}},toHandleWith:function(t,e){for(var r=t.split(".")[0],n=u._data(this.actual.get(0),"events")[r],i=0;i<n.length;i++)if(n[i].handler==e)return!0;return!1}},r=function(t,e){return void 0===e?void 0!==t:t==e},t=function(r){var n=a.Matchers.prototype[r];a.JQuery.matchersClass[r]=function(){if(this.actual&&(this.actual instanceof u||a.isDomNode(this.actual))){this.actual=u(this.actual);var t,e=i[r].apply(this,arguments);return this.actual.get&&(t=this.actual.get()[0])&&!u.isWindow(t)&&"HTML"!==t.tagName&&(this.actual=a.JQuery.elementToString(this.actual)),e}return!!n&&n.apply(this,arguments)}};for(var e in i)t(e)}(),beforeEach(function(){this.addMatchers(a.JQuery.matchersClass),this.addMatchers({toHaveBeenTriggeredOn:function(t){return this.message=function(){return["Expected event "+this.actual+" to have been triggered on "+t,"Expected event "+this.actual+" not to have been triggered on "+t]},a.JQuery.events.wasTriggered(t,this.actual)}}),this.addMatchers({toHaveBeenTriggered:function(){var t=this.actual.eventName,e=this.actual.selector;return this.message=function(){return["Expected event "+t+" to have been triggered on "+e,"Expected event "+t+" not to have been triggered on "+e]},a.JQuery.events.wasTriggered(e,t)}}),this.addMatchers({toHaveBeenTriggeredOnAndWith:function(){var e=arguments[0],r=arguments[1],n=a.JQuery.events.wasTriggered(e,this.actual);return this.message=function(){if(n){var t=a.JQuery.events.args(e,this.actual,r)[1];return["Expected event "+this.actual+" to have been triggered with "+a.pp(r)+"  but it was triggered with "+a.pp(t),"Expected event "+this.actual+" not to have been triggered with "+a.pp(r)+" but it was triggered with "+a.pp(t)]}return["Expected event "+this.actual+" to have been triggered on "+e,"Expected event "+this.actual+" not to have been triggered on "+e]},n&&a.JQuery.events.wasTriggeredWith(e,this.actual,r,this.env)}}),this.addMatchers({toHaveBeenPreventedOn:function(t){return this.message=function(){return["Expected event "+this.actual+" to have been prevented on "+t,"Expected event "+this.actual+" not to have been prevented on "+t]},a.JQuery.events.wasPrevented(t,this.actual)}}),this.addMatchers({toHaveBeenPrevented:function(){var t=this.actual.eventName,e=this.actual.selector;return this.message=function(){return["Expected event "+t+" to have been prevented on "+e,"Expected event "+t+" not to have been prevented on "+e]},a.JQuery.events.wasPrevented(e,t)}}),this.addMatchers({toHaveBeenStoppedOn:function(t){return this.message=function(){return["Expected event "+this.actual+" to have been stopped on "+t,"Expected event "+this.actual+" not to have been stopped on "+t]},a.JQuery.events.wasStopped(t,this.actual)}}),this.addMatchers({toHaveBeenStopped:function(){var t=this.actual.eventName,e=this.actual.selector;return this.message=function(){return["Expected event "+t+" to have been stopped on "+e,"Expected event "+t+" not to have been stopped on "+e]},a.JQuery.events.wasStopped(e,t)}}),a.getEnv().addEqualityTester(function(t,e){if(t instanceof jQuery&&e instanceof jQuery){if(t.size()!=e.size())return a.undefined;if(t.is(e))return!0}return a.undefined})}),afterEach(function(){a.getFixtures().cleanUp(),a.getStyleFixtures().cleanUp(),a.JQuery.events.cleanUp()})}(window.jasmine,window.jQuery),function(r,t){"use strict";t.readFixtures=function(){return r.getFixtures().proxyCallTo_("read",arguments)},t.preloadFixtures=function(){r.getFixtures().proxyCallTo_("preload",arguments)},t.loadFixtures=function(){r.getFixtures().proxyCallTo_("load",arguments)},t.appendLoadFixtures=function(){r.getFixtures().proxyCallTo_("appendLoad",arguments)},t.setFixtures=function(t){return r.getFixtures().proxyCallTo_("set",arguments)},t.appendSetFixtures=function(){r.getFixtures().proxyCallTo_("appendSet",arguments)},t.sandbox=function(t){return r.getFixtures().sandbox(t)},t.spyOnEvent=function(t,e){return r.JQuery.events.spyOn(t,e)},t.preloadStyleFixtures=function(){r.getStyleFixtures().proxyCallTo_("preload",arguments)},t.loadStyleFixtures=function(){r.getStyleFixtures().proxyCallTo_("load",arguments)},t.appendLoadStyleFixtures=function(){r.getStyleFixtures().proxyCallTo_("appendLoad",arguments)},t.setStyleFixtures=function(t){r.getStyleFixtures().proxyCallTo_("set",arguments)},t.appendSetStyleFixtures=function(t){r.getStyleFixtures().proxyCallTo_("appendSet",arguments)},t.loadJSONFixtures=function(){return r.getJSONFixtures().proxyCallTo_("load",arguments)},t.getJSONFixture=function(t){return r.getJSONFixtures().proxyCallTo_("read",arguments)[t]}}(jasmine,window);